{"version":3,"file":"database-BEo7tORy.js","names":[],"sources":["../../src/services/database.ts"],"sourcesContent":["import { supabase } from '@/lib/supabase/client'\nimport {\n  Project,\n  Book,\n  ResumeEntry,\n  MusicTrack,\n  ContactSubmission,\n} from '@/types'\n\nexport const getProjects = async () => {\n  const { data, error } = await supabase\n    .from('projects')\n    .select('*')\n    .order('created_at', { ascending: false })\n  return { data: data as Project[], error }\n}\n\nexport const getBooks = async () => {\n  const { data, error } = await supabase\n    .from('books')\n    .select('*')\n    .order('created_at', { ascending: false })\n  return { data: data as Book[], error }\n}\n\nexport const getResumeEntries = async () => {\n  // Casting to any to avoid type errors since table is named 'resume_entries' but types might not be regenerated\n  const { data, error } = await supabase\n    .from('resume_entries' as any)\n    .select('*')\n    .order('start_date', { ascending: false })\n  return { data: data as ResumeEntry[], error }\n}\n\nexport const getMusicTracks = async () => {\n  const { data, error } = await supabase\n    .from('music_tracks')\n    .select('*')\n    .order('created_at', { ascending: false })\n  return { data: data as MusicTrack[], error }\n}\n\nexport const submitContact = async (\n  submission: Omit<ContactSubmission, 'id' | 'created_at'>,\n) => {\n  const { data, error } = await supabase\n    .from('contact_submissions')\n    .insert([submission])\n    .select()\n  return { data, error }\n}\n\nexport const getLatestItem = async () => {\n  const { data: projects } = await supabase\n    .from('projects')\n    .select('*')\n    .limit(1)\n    .order('created_at', { ascending: false })\n  const { data: books } = await supabase\n    .from('books')\n    .select('*')\n    .limit(1)\n    .order('created_at', { ascending: false })\n\n  const project = projects?.[0]\n  const book = books?.[0]\n\n  if (project && book) {\n    return new Date(project.created_at) > new Date(book.created_at)\n      ? { type: 'project', item: project as Project }\n      : { type: 'book', item: book as Book }\n  } else if (project) {\n    return { type: 'project', item: project as Project }\n  } else if (book) {\n    return { type: 'book', item: book as Book }\n  }\n\n  return null\n}\n"],"mappings":";AASA,MAAa,cAAc,YAAY;CACrC,MAAM,EAAE,MAAM,UAAU,MAAM,SAC3B,KAAK,WAAW,CAChB,OAAO,IAAI,CACX,MAAM,cAAc,EAAE,WAAW,OAAO,CAAC;AAC5C,QAAO;EAAQ;EAAmB;EAAO;;AAG3C,MAAa,WAAW,YAAY;CAClC,MAAM,EAAE,MAAM,UAAU,MAAM,SAC3B,KAAK,QAAQ,CACb,OAAO,IAAI,CACX,MAAM,cAAc,EAAE,WAAW,OAAO,CAAC;AAC5C,QAAO;EAAQ;EAAgB;EAAO;;AAGxC,MAAa,mBAAmB,YAAY;CAE1C,MAAM,EAAE,MAAM,UAAU,MAAM,SAC3B,KAAK,iBAAwB,CAC7B,OAAO,IAAI,CACX,MAAM,cAAc,EAAE,WAAW,OAAO,CAAC;AAC5C,QAAO;EAAQ;EAAuB;EAAO;;AAG/C,MAAa,iBAAiB,YAAY;CACxC,MAAM,EAAE,MAAM,UAAU,MAAM,SAC3B,KAAK,eAAe,CACpB,OAAO,IAAI,CACX,MAAM,cAAc,EAAE,WAAW,OAAO,CAAC;AAC5C,QAAO;EAAQ;EAAsB;EAAO;;AAG9C,MAAa,gBAAgB,OAC3B,eACG;CACH,MAAM,EAAE,MAAM,UAAU,MAAM,SAC3B,KAAK,sBAAsB,CAC3B,OAAO,CAAC,WAAW,CAAC,CACpB,QAAQ;AACX,QAAO;EAAE;EAAM;EAAO;;AAGxB,MAAa,gBAAgB,YAAY;CACvC,MAAM,EAAE,MAAM,aAAa,MAAM,SAC9B,KAAK,WAAW,CAChB,OAAO,IAAI,CACX,MAAM,EAAE,CACR,MAAM,cAAc,EAAE,WAAW,OAAO,CAAC;CAC5C,MAAM,EAAE,MAAM,UAAU,MAAM,SAC3B,KAAK,QAAQ,CACb,OAAO,IAAI,CACX,MAAM,EAAE,CACR,MAAM,cAAc,EAAE,WAAW,OAAO,CAAC;CAE5C,MAAM,UAAU,WAAW;CAC3B,MAAM,OAAO,QAAQ;AAErB,KAAI,WAAW,KACb,QAAO,IAAI,KAAK,QAAQ,WAAW,GAAG,IAAI,KAAK,KAAK,WAAW,GAC3D;EAAE,MAAM;EAAW,MAAM;EAAoB,GAC7C;EAAE,MAAM;EAAQ,MAAM;EAAc;UAC/B,QACT,QAAO;EAAE,MAAM;EAAW,MAAM;EAAoB;UAC3C,KACT,QAAO;EAAE,MAAM;EAAQ,MAAM;EAAc;AAG7C,QAAO"}