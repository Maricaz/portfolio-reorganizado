{"version":3,"file":"music-CAgwHiTu.js","names":[],"sources":["../../src/services/music.ts"],"sourcesContent":["import { supabase } from '@/lib/supabase/client'\nimport { Database } from '@/lib/supabase/types'\n\ntype MusicTrack = Database['public']['Tables']['music_tracks']['Row']\ntype MusicTrackInsert = Database['public']['Tables']['music_tracks']['Insert']\ntype MusicTrackUpdate = Database['public']['Tables']['music_tracks']['Update']\n\n// AlbumConcept is not in the generated types, defining as any to prevent errors while keeping functionality\ntype AlbumConcept = any\n\nexport const getMusicTracks = async () => {\n  const { data, error } = await supabase\n    .from('music_tracks')\n    .select('*')\n    .order('created_at', { ascending: false })\n\n  if (error) {\n    console.error('Error fetching music tracks:', error)\n    throw error\n  }\n\n  return (data as MusicTrack[]) || []\n}\n\nexport const getAlbumConcept = async () => {\n  // Cast to any to avoid type errors if table is missing from generated types\n  const { data, error } = await supabase\n    .from('album_concept' as any)\n    .select('*')\n    .limit(1)\n    .single()\n\n  if (error) {\n    // Return null instead of throwing to avoid crashing if concept is optional/missing\n    return null\n  }\n\n  return data as AlbumConcept\n}\n\nexport const createTrack = async (track: MusicTrackInsert) => {\n  const { data, error } = await supabase\n    .from('music_tracks')\n    .insert(track)\n    .select()\n    .single()\n\n  if (error) throw error\n  return data\n}\n\nexport const updateTrack = async (id: string, updates: MusicTrackUpdate) => {\n  const { data, error } = await supabase\n    .from('music_tracks')\n    .update(updates)\n    .eq('id', id)\n    .select()\n    .single()\n\n  if (error) throw error\n  return data\n}\n\nexport const deleteTrack = async (id: string) => {\n  const { error } = await supabase.from('music_tracks').delete().eq('id', id)\n\n  if (error) throw error\n  return true\n}\n"],"mappings":";AAUA,MAAa,iBAAiB,YAAY;CACxC,MAAM,EAAE,MAAM,UAAU,MAAM,SAC3B,KAAK,eAAe,CACpB,OAAO,IAAI,CACX,MAAM,cAAc,EAAE,WAAW,OAAO,CAAC;AAE5C,KAAI,OAAO;AACT,UAAQ,MAAM,gCAAgC,MAAM;AACpD,QAAM;;AAGR,QAAQ,QAAyB,EAAE;;AAGrC,MAAa,kBAAkB,YAAY;CAEzC,MAAM,EAAE,MAAM,UAAU,MAAM,SAC3B,KAAK,gBAAuB,CAC5B,OAAO,IAAI,CACX,MAAM,EAAE,CACR,QAAQ;AAEX,KAAI,MAEF,QAAO;AAGT,QAAO;;AAGT,MAAa,cAAc,OAAO,UAA4B;CAC5D,MAAM,EAAE,MAAM,UAAU,MAAM,SAC3B,KAAK,eAAe,CACpB,OAAO,MAAM,CACb,QAAQ,CACR,QAAQ;AAEX,KAAI,MAAO,OAAM;AACjB,QAAO;;AAGT,MAAa,cAAc,OAAO,IAAY,YAA8B;CAC1E,MAAM,EAAE,MAAM,UAAU,MAAM,SAC3B,KAAK,eAAe,CACpB,OAAO,QAAQ,CACf,GAAG,MAAM,GAAG,CACZ,QAAQ,CACR,QAAQ;AAEX,KAAI,MAAO,OAAM;AACjB,QAAO;;AAGT,MAAa,cAAc,OAAO,OAAe;CAC/C,MAAM,EAAE,UAAU,MAAM,SAAS,KAAK,eAAe,CAAC,QAAQ,CAAC,GAAG,MAAM,GAAG;AAE3E,KAAI,MAAO,OAAM;AACjB,QAAO"}