{"version":3,"file":"admin-BJR3xOrt.js","names":[],"sources":["../../src/services/admin.ts"],"sourcesContent":["import { supabase } from '@/lib/supabase/client'\nimport { Notification, UserProfile, AdminPermissions } from '@/types'\n\nexport const getNotifications = async () => {\n  const { data, error } = await supabase\n    .from('notifications')\n    .select('*')\n    .order('created_at', { ascending: false })\n    .limit(50)\n    .returns<Notification[]>()\n\n  if (error) {\n    console.error('Error fetching notifications:', error)\n    return []\n  }\n  return data\n}\n\nexport const markNotificationAsRead = async (id: string) => {\n  const { error } = await supabase\n    .from('notifications')\n    .update({ read: true })\n    .eq('id', id)\n\n  if (error) throw error\n  return true\n}\n\nexport const markAllNotificationsAsRead = async () => {\n  const { error } = await supabase\n    .from('notifications')\n    .update({ read: true })\n    .eq('read', false)\n\n  if (error) throw error\n  return true\n}\n\nexport const getAllProfiles = async () => {\n  const { data, error } = await supabase\n    .from('profiles')\n    .select('*')\n    .order('created_at', { ascending: false })\n    .returns<UserProfile[]>()\n\n  if (error) throw error\n  return data\n}\n\nexport const updateUserRole = async (userId: string, role: string) => {\n  const { error } = await supabase\n    .from('profiles')\n    .update({ role })\n    .eq('id', userId)\n\n  if (error) throw error\n  return true\n}\n\nexport const updateUserPermissions = async (\n  userId: string,\n  permissions: AdminPermissions,\n) => {\n  const { error } = await supabase\n    .from('profiles')\n    .update({ permissions })\n    .eq('id', userId)\n\n  if (error) throw error\n  return true\n}\n\nexport const toggleUserBan = async (userId: string, isBanned: boolean) => {\n  const { error } = await supabase\n    .from('profiles')\n    .update({ is_banned: isBanned })\n    .eq('id', userId)\n\n  if (error) throw error\n  return true\n}\n\nexport const triggerPasswordReset = async (email: string) => {\n  const { error } = await supabase.auth.resetPasswordForEmail(email, {\n    redirectTo: `${window.location.origin}/admin/reset-password`,\n  })\n  if (error) throw error\n  return true\n}\n\nexport const deleteUserProfile = async (userId: string) => {\n  const { error } = await supabase.from('profiles').delete().eq('id', userId)\n  if (error) throw error\n  return true\n}\n\nexport const createUser = async (\n  data: any,\n): Promise<{ data: any; error: any }> => {\n  const { data: result, error } = await supabase.functions.invoke(\n    'create-user',\n    {\n      body: data,\n    },\n  )\n  return { data: result, error }\n}\n"],"mappings":";AAGA,MAAa,mBAAmB,YAAY;CAC1C,MAAM,EAAE,MAAM,UAAU,MAAM,SAC3B,KAAK,gBAAgB,CACrB,OAAO,IAAI,CACX,MAAM,cAAc,EAAE,WAAW,OAAO,CAAC,CACzC,MAAM,GAAG,CACT,SAAyB;AAE5B,KAAI,OAAO;AACT,UAAQ,MAAM,iCAAiC,MAAM;AACrD,SAAO,EAAE;;AAEX,QAAO;;AAGT,MAAa,yBAAyB,OAAO,OAAe;CAC1D,MAAM,EAAE,UAAU,MAAM,SACrB,KAAK,gBAAgB,CACrB,OAAO,EAAE,MAAM,MAAM,CAAC,CACtB,GAAG,MAAM,GAAG;AAEf,KAAI,MAAO,OAAM;AACjB,QAAO;;AAGT,MAAa,6BAA6B,YAAY;CACpD,MAAM,EAAE,UAAU,MAAM,SACrB,KAAK,gBAAgB,CACrB,OAAO,EAAE,MAAM,MAAM,CAAC,CACtB,GAAG,QAAQ,MAAM;AAEpB,KAAI,MAAO,OAAM;AACjB,QAAO;;AAGT,MAAa,iBAAiB,YAAY;CACxC,MAAM,EAAE,MAAM,UAAU,MAAM,SAC3B,KAAK,WAAW,CAChB,OAAO,IAAI,CACX,MAAM,cAAc,EAAE,WAAW,OAAO,CAAC,CACzC,SAAwB;AAE3B,KAAI,MAAO,OAAM;AACjB,QAAO;;AAGT,MAAa,iBAAiB,OAAO,QAAgB,SAAiB;CACpE,MAAM,EAAE,UAAU,MAAM,SACrB,KAAK,WAAW,CAChB,OAAO,EAAE,MAAM,CAAC,CAChB,GAAG,MAAM,OAAO;AAEnB,KAAI,MAAO,OAAM;AACjB,QAAO;;AAGT,MAAa,wBAAwB,OACnC,QACA,gBACG;CACH,MAAM,EAAE,UAAU,MAAM,SACrB,KAAK,WAAW,CAChB,OAAO,EAAE,aAAa,CAAC,CACvB,GAAG,MAAM,OAAO;AAEnB,KAAI,MAAO,OAAM;AACjB,QAAO;;AAGT,MAAa,gBAAgB,OAAO,QAAgB,aAAsB;CACxE,MAAM,EAAE,UAAU,MAAM,SACrB,KAAK,WAAW,CAChB,OAAO,EAAE,WAAW,UAAU,CAAC,CAC/B,GAAG,MAAM,OAAO;AAEnB,KAAI,MAAO,OAAM;AACjB,QAAO;;AAGT,MAAa,uBAAuB,OAAO,UAAkB;CAC3D,MAAM,EAAE,UAAU,MAAM,SAAS,KAAK,sBAAsB,OAAO,EACjE,YAAY,GAAG,OAAO,SAAS,OAAO,wBACvC,CAAC;AACF,KAAI,MAAO,OAAM;AACjB,QAAO;;AAGT,MAAa,oBAAoB,OAAO,WAAmB;CACzD,MAAM,EAAE,UAAU,MAAM,SAAS,KAAK,WAAW,CAAC,QAAQ,CAAC,GAAG,MAAM,OAAO;AAC3E,KAAI,MAAO,OAAM;AACjB,QAAO;;AAGT,MAAa,aAAa,OACxB,SACuC;CACvC,MAAM,EAAE,MAAM,QAAQ,UAAU,MAAM,SAAS,UAAU,OACvD,eACA,EACE,MAAM,MACP,CACF;AACD,QAAO;EAAE,MAAM;EAAQ;EAAO"}