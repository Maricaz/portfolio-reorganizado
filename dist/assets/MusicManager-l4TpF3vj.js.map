{"version":3,"file":"MusicManager-l4TpF3vj.js","names":["trackData: any"],"sources":["../../../../cache/modules/portfolio-reorganizado-7831f/node_modules/.pnpm/lucide-react@0.562.0_react@19.2.3/node_modules/lucide-react/dist/esm/icons/list-music.js","../../src/components/admin/music/TrackDetailsDialog.tsx","../../src/components/admin/music/TracksTab.tsx","../../src/components/admin/music/PlaylistsTab.tsx","../../src/pages/admin/MusicManager.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.562.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M16 5H3\", key: \"m91uny\" }],\n  [\"path\", { d: \"M11 12H3\", key: \"51ecnj\" }],\n  [\"path\", { d: \"M11 19H3\", key: \"zflm78\" }],\n  [\"path\", { d: \"M21 16V5\", key: \"yxg4q8\" }],\n  [\"circle\", { cx: \"18\", cy: \"16\", r: \"3\", key: \"1hluhg\" }]\n];\nconst ListMusic = createLucideIcon(\"list-music\", __iconNode);\n\nexport { __iconNode, ListMusic as default };\n//# sourceMappingURL=list-music.js.map\n","import {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog'\nimport { MusicTrack } from '@/types'\nimport { ScrollArea } from '@/components/ui/scroll-area'\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs'\nimport { Badge } from '@/components/ui/badge'\nimport { ExternalLink, Music } from 'lucide-react'\n\ninterface TrackDetailsDialogProps {\n  track: MusicTrack | null\n  open: boolean\n  onOpenChange: (open: boolean) => void\n}\n\nexport function TrackDetailsDialog({\n  track,\n  open,\n  onOpenChange,\n}: TrackDetailsDialogProps) {\n  if (!track) return null\n\n  const lyrics = track.lyrics || {}\n  const platforms = track.platforms || {}\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-2xl max-h-[90vh] flex flex-col\">\n        <DialogHeader>\n          <DialogTitle className=\"text-2xl font-bold flex items-center gap-2\">\n            <Music className=\"w-6 h-6\" />\n            Track Details\n          </DialogTitle>\n        </DialogHeader>\n\n        <div className=\"flex-1 overflow-hidden\">\n          <ScrollArea className=\"h-full pr-4\">\n            <div className=\"space-y-6\">\n              {/* Header Info */}\n              <div className=\"flex gap-6 items-start\">\n                {track.image_url ? (\n                  <img\n                    src={track.image_url}\n                    alt={track.title}\n                    className=\"w-32 h-32 rounded-lg object-cover shadow-md\"\n                  />\n                ) : (\n                  <div className=\"w-32 h-32 bg-muted rounded-lg flex items-center justify-center\">\n                    <Music className=\"w-12 h-12 text-muted-foreground\" />\n                  </div>\n                )}\n                <div className=\"space-y-2\">\n                  <h3 className=\"text-xl font-semibold\">{track.title}</h3>\n                  <p className=\"text-muted-foreground text-lg\">\n                    {track.artist}\n                  </p>\n                  <div className=\"flex flex-wrap gap-2\">\n                    {Object.keys(platforms).map((p) => (\n                      <Badge key={p} variant=\"outline\" className=\"capitalize\">\n                        {p}\n                      </Badge>\n                    ))}\n                  </div>\n                </div>\n              </div>\n\n              {/* Audio Player */}\n              {track.src_url && (\n                <div className=\"bg-muted/30 p-4 rounded-lg\">\n                  <h4 className=\"font-medium mb-2 text-sm text-muted-foreground\">\n                    Preview\n                  </h4>\n                  <audio controls className=\"w-full h-10\">\n                    <source src={track.src_url} />\n                    Your browser does not support the audio element.\n                  </audio>\n                </div>\n              )}\n\n              {/* Lyrics */}\n              <div className=\"space-y-2\">\n                <h4 className=\"font-semibold\">Lyrics</h4>\n                {Object.keys(lyrics).length > 0 ? (\n                  <Tabs\n                    defaultValue={Object.keys(lyrics)[0]}\n                    className=\"w-full\"\n                  >\n                    <TabsList>\n                      {Object.keys(lyrics).map((lang) => (\n                        <TabsTrigger\n                          key={lang}\n                          value={lang}\n                          className=\"uppercase\"\n                        >\n                          {lang}\n                        </TabsTrigger>\n                      ))}\n                    </TabsList>\n                    {Object.entries(lyrics).map(([lang, text]) => (\n                      <TabsContent key={lang} value={lang}>\n                        <div className=\"p-4 bg-muted/20 rounded-lg whitespace-pre-wrap text-sm leading-relaxed border\">\n                          {text}\n                        </div>\n                      </TabsContent>\n                    ))}\n                  </Tabs>\n                ) : (\n                  <p className=\"text-muted-foreground italic\">\n                    No lyrics available.\n                  </p>\n                )}\n              </div>\n\n              {/* Platforms */}\n              <div className=\"space-y-2\">\n                <h4 className=\"font-semibold\">Platform Links</h4>\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2\">\n                  {Object.entries(platforms).map(([platform, id]) => (\n                    <div\n                      key={platform}\n                      className=\"flex items-center justify-between p-3 border rounded-md\"\n                    >\n                      <span className=\"capitalize font-medium\">{platform}</span>\n                      <code className=\"text-xs bg-muted px-2 py-1 rounded\">\n                        {id}\n                      </code>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </div>\n          </ScrollArea>\n        </div>\n      </DialogContent>\n    </Dialog>\n  )\n}\n","import { useState, useEffect } from 'react'\nimport { useForm } from 'react-hook-form'\nimport { zodResolver } from '@hookform/resolvers/zod'\nimport * as z from 'zod'\nimport {\n  getTracksPaginated,\n  createTrack,\n  updateTrack,\n  deleteTrack,\n} from '@/services/music'\nimport { uploadFile } from '@/services/storage'\nimport { MusicTrack } from '@/types'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Textarea } from '@/components/ui/textarea'\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table'\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from '@/components/ui/dialog'\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n  FormDescription,\n} from '@/components/ui/form'\nimport { useToast } from '@/hooks/use-toast'\nimport {\n  Plus,\n  Pencil,\n  Trash,\n  Image as ImageIcon,\n  Loader2,\n  Music,\n  Eye,\n  Search,\n} from 'lucide-react'\nimport { ExportButton } from '@/components/admin/ExportButton'\nimport { TrackDetailsDialog } from './TrackDetailsDialog'\nimport { PaginationControl } from '@/components/PaginationControl'\n\nconst trackSchema = z.object({\n  title: z.string().min(1, 'Title is required'),\n  artist: z.string().min(1, 'Artist is required'),\n  src_url: z.string().optional(),\n  image_url: z.string().optional(),\n  lyrics_pt: z.string().optional(),\n  lyrics_en: z.string().optional(),\n  lyrics_ko: z.string().optional(),\n  spotify_id: z.string().optional(),\n  deezer_id: z.string().optional(),\n  apple_id: z.string().optional(),\n  youtube_id: z.string().optional(),\n})\n\ntype TrackFormValues = z.infer<typeof trackSchema>\n\nexport function TracksTab() {\n  const [tracks, setTracks] = useState<MusicTrack[]>([])\n  const [totalTracks, setTotalTracks] = useState(0)\n  const [currentPage, setCurrentPage] = useState(1)\n  const [totalPages, setTotalPages] = useState(1)\n  const [loading, setLoading] = useState(true)\n  const [search, setSearch] = useState('')\n\n  const [isOpen, setIsOpen] = useState(false)\n  const [editingId, setEditingId] = useState<string | null>(null)\n  const [uploading, setUploading] = useState(false)\n  const [audioUploading, setAudioUploading] = useState(false)\n  const [viewTrack, setViewTrack] = useState<MusicTrack | null>(null)\n  const { toast } = useToast()\n\n  const pageSize = 10\n\n  const form = useForm<TrackFormValues>({\n    resolver: zodResolver(trackSchema),\n    defaultValues: {\n      title: '',\n      artist: '',\n      src_url: '',\n      image_url: '',\n      lyrics_pt: '',\n      lyrics_en: '',\n      lyrics_ko: '',\n      spotify_id: '',\n      deezer_id: '',\n      apple_id: '',\n      youtube_id: '',\n    },\n  })\n\n  const loadTracks = async () => {\n    try {\n      setLoading(true)\n      const {\n        data,\n        count,\n        totalPages: total,\n      } = await getTracksPaginated(currentPage, pageSize, search)\n      setTracks((data as unknown as MusicTrack[]) || [])\n      setTotalTracks(count)\n      setTotalPages(total)\n    } catch (error) {\n      console.error('Failed to load tracks:', error)\n      toast({\n        title: 'Error',\n        description: 'Failed to load tracks. Please try again.',\n        variant: 'destructive',\n      })\n      setTracks([])\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      if (currentPage !== 1 && search) {\n        setCurrentPage(1)\n      } else {\n        loadTracks()\n      }\n    }, 500)\n    return () => clearTimeout(timer)\n  }, [search, currentPage])\n\n  const handleEdit = (track: MusicTrack) => {\n    setEditingId(track.id)\n    const lyrics = track.lyrics || {}\n    const platforms = track.platforms || {}\n\n    form.reset({\n      title: track.title,\n      artist: track.artist,\n      src_url: track.src_url || '',\n      image_url: track.image_url || '',\n      lyrics_pt: lyrics.pt || '',\n      lyrics_en: lyrics.en || '',\n      lyrics_ko: lyrics.ko || '',\n      spotify_id: platforms.spotify || '',\n      deezer_id: platforms.deezer || '',\n      apple_id: platforms.apple || '',\n      youtube_id: platforms.youtube || '',\n    })\n    setIsOpen(true)\n  }\n\n  const handleAddNew = () => {\n    setEditingId(null)\n    form.reset({\n      title: '',\n      artist: '',\n      src_url: '',\n      image_url: '',\n      lyrics_pt: '',\n      lyrics_en: '',\n      lyrics_ko: '',\n      spotify_id: '',\n      deezer_id: '',\n      apple_id: '',\n      youtube_id: '',\n    })\n    setIsOpen(true)\n  }\n\n  const handleImageUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0]\n    if (!file) return\n\n    try {\n      setUploading(true)\n      const url = await uploadFile(file, 'portfolio-media', 'music-covers')\n      form.setValue('image_url', url)\n      toast({ title: 'Success', description: 'Album art uploaded' })\n    } catch (error) {\n      toast({\n        title: 'Upload Error',\n        description: 'Failed to upload image',\n        variant: 'destructive',\n      })\n    } finally {\n      setUploading(false)\n    }\n  }\n\n  const handleAudioUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0]\n    if (!file) return\n\n    try {\n      setAudioUploading(true)\n      const url = await uploadFile(file, 'music', 'tracks')\n      form.setValue('src_url', url)\n      toast({ title: 'Success', description: 'Audio track uploaded' })\n    } catch (error) {\n      console.error(error)\n      toast({\n        title: 'Upload Error',\n        description:\n          'Failed to upload audio file. Ensure \"music\" bucket exists.',\n        variant: 'destructive',\n      })\n    } finally {\n      setAudioUploading(false)\n    }\n  }\n\n  const onSubmit = async (values: TrackFormValues) => {\n    try {\n      const trackData: any = {\n        title: values.title,\n        artist: values.artist,\n        src_url: values.src_url,\n        image_url: values.image_url,\n        lyrics: {\n          pt: values.lyrics_pt,\n          en: values.lyrics_en,\n          ko: values.lyrics_ko,\n        },\n        platforms: {\n          spotify: values.spotify_id,\n          deezer: values.deezer_id,\n          apple: values.apple_id,\n          youtube: values.youtube_id,\n        },\n      }\n\n      if (editingId) {\n        await updateTrack(editingId, trackData)\n        toast({ title: 'Success', description: 'Track updated' })\n      } else {\n        await createTrack(trackData)\n        toast({ title: 'Success', description: 'Track created' })\n      }\n      setIsOpen(false)\n      loadTracks()\n    } catch (error) {\n      console.error('Operation failed:', error)\n      toast({\n        title: 'Error',\n        description: 'Operation failed',\n        variant: 'destructive',\n      })\n    }\n  }\n\n  const handleDelete = async (id: string) => {\n    if (!confirm('Are you sure?')) return\n    try {\n      await deleteTrack(id)\n      loadTracks()\n      toast({ title: 'Success', description: 'Track deleted' })\n    } catch (error) {\n      toast({\n        title: 'Error',\n        description: 'Failed to delete',\n        variant: 'destructive',\n      })\n    }\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <div className=\"space-y-1\">\n          <h2 className=\"text-2xl font-bold tracking-tight\">Music Tracks</h2>\n          <p className=\"text-muted-foreground\">\n            Upload and manage your music library. Total: {totalTracks}\n          </p>\n        </div>\n        <div className=\"flex gap-2\">\n          <ExportButton data={tracks} filename=\"music_tracks_export\" />\n          <Dialog open={isOpen} onOpenChange={setIsOpen}>\n            <DialogTrigger asChild>\n              <Button onClick={handleAddNew}>\n                <Plus className=\"mr-2 h-4 w-4\" /> Add Track\n              </Button>\n            </DialogTrigger>\n            <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n              <DialogHeader>\n                <DialogTitle>\n                  {editingId ? 'Edit Track' : 'Add Track'}\n                </DialogTitle>\n              </DialogHeader>\n              <Form {...form}>\n                <form\n                  onSubmit={form.handleSubmit(onSubmit)}\n                  className=\"space-y-4\"\n                >\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <FormField\n                      control={form.control}\n                      name=\"title\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Title</FormLabel>\n                          <FormControl>\n                            <Input {...field} />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n                    <FormField\n                      control={form.control}\n                      name=\"artist\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Artist</FormLabel>\n                          <FormControl>\n                            <Input {...field} />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n                  </div>\n\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div className=\"space-y-2\">\n                      <FormLabel>Audio File</FormLabel>\n                      <div className=\"flex gap-2 items-center\">\n                        <Input\n                          type=\"file\"\n                          accept=\".mp3,audio/*\"\n                          onChange={handleAudioUpload}\n                          disabled={audioUploading}\n                        />\n                        {audioUploading && (\n                          <Loader2 className=\"animate-spin h-4 w-4\" />\n                        )}\n                      </div>\n                      <FormField\n                        control={form.control}\n                        name=\"src_url\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormControl>\n                              <Input placeholder=\"Or audio URL...\" {...field} />\n                            </FormControl>\n                            <FormDescription className=\"text-xs\">\n                              Upload an MP3 or paste a direct link.\n                            </FormDescription>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                    </div>\n\n                    <div className=\"space-y-2\">\n                      <FormLabel>Album Art</FormLabel>\n                      <div className=\"flex gap-2 items-center\">\n                        <Input\n                          type=\"file\"\n                          accept=\"image/*\"\n                          onChange={handleImageUpload}\n                          disabled={uploading}\n                        />\n                        {form.watch('image_url') && (\n                          <div className=\"relative h-10 w-10 border rounded overflow-hidden shrink-0\">\n                            <img\n                              src={form.watch('image_url')}\n                              alt=\"Preview\"\n                              className=\"h-full w-full object-cover\"\n                            />\n                          </div>\n                        )}\n                      </div>\n                      <FormField\n                        control={form.control}\n                        name=\"image_url\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormControl>\n                              <Input placeholder=\"Or image URL...\" {...field} />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                    </div>\n                  </div>\n\n                  <div className=\"border rounded p-4 space-y-4\">\n                    <h3 className=\"font-semibold text-sm\">Lyrics</h3>\n                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                      <FormField\n                        control={form.control}\n                        name=\"lyrics_pt\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Portuguese</FormLabel>\n                            <FormControl>\n                              <Textarea className=\"h-24\" {...field} />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                      <FormField\n                        control={form.control}\n                        name=\"lyrics_en\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>English</FormLabel>\n                            <FormControl>\n                              <Textarea className=\"h-24\" {...field} />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                      <FormField\n                        control={form.control}\n                        name=\"lyrics_ko\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Korean</FormLabel>\n                            <FormControl>\n                              <Textarea className=\"h-24\" {...field} />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                    </div>\n                  </div>\n\n                  <div className=\"border rounded p-4 space-y-4\">\n                    <h3 className=\"font-semibold text-sm\">Platform IDs</h3>\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n                      <FormField\n                        control={form.control}\n                        name=\"spotify_id\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Spotify ID</FormLabel>\n                            <FormControl>\n                              <Input {...field} />\n                            </FormControl>\n                          </FormItem>\n                        )}\n                      />\n                      <FormField\n                        control={form.control}\n                        name=\"deezer_id\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Deezer ID</FormLabel>\n                            <FormControl>\n                              <Input {...field} />\n                            </FormControl>\n                          </FormItem>\n                        )}\n                      />\n                      <FormField\n                        control={form.control}\n                        name=\"apple_id\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Apple ID</FormLabel>\n                            <FormControl>\n                              <Input {...field} />\n                            </FormControl>\n                          </FormItem>\n                        )}\n                      />\n                      <FormField\n                        control={form.control}\n                        name=\"youtube_id\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>YouTube ID</FormLabel>\n                            <FormControl>\n                              <Input {...field} />\n                            </FormControl>\n                          </FormItem>\n                        )}\n                      />\n                    </div>\n                  </div>\n\n                  <Button\n                    type=\"submit\"\n                    className=\"w-full\"\n                    disabled={uploading || audioUploading}\n                  >\n                    {uploading || audioUploading\n                      ? 'Uploading...'\n                      : 'Save Track'}\n                  </Button>\n                </form>\n              </Form>\n            </DialogContent>\n          </Dialog>\n        </div>\n      </div>\n\n      <div className=\"flex items-center gap-2\">\n        <Search className=\"h-4 w-4 text-muted-foreground\" />\n        <Input\n          placeholder=\"Search tracks...\"\n          className=\"max-w-sm\"\n          value={search}\n          onChange={(e) => setSearch(e.target.value)}\n        />\n      </div>\n\n      <div className=\"border rounded-md\">\n        {loading ? (\n          <div className=\"flex flex-col items-center justify-center p-8 space-y-2\">\n            <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\n            <p className=\"text-sm text-muted-foreground\">Loading tracks...</p>\n          </div>\n        ) : tracks.length === 0 ? (\n          <div className=\"flex flex-col items-center justify-center p-8 space-y-2 text-center\">\n            <div className=\"rounded-full bg-muted p-3\">\n              <ImageIcon className=\"h-6 w-6 text-muted-foreground\" />\n            </div>\n            <h3 className=\"font-semibold text-lg\">No tracks found</h3>\n            <p className=\"text-sm text-muted-foreground max-w-sm\">\n              You haven't added any music tracks yet. Click the \"Add Track\"\n              button to get started.\n            </p>\n          </div>\n        ) : (\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead>Art</TableHead>\n                <TableHead>Title</TableHead>\n                <TableHead>Artist</TableHead>\n                <TableHead>Actions</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {tracks.map((track) => (\n                <TableRow key={track.id}>\n                  <TableCell>\n                    {track.image_url ? (\n                      <img\n                        src={track.image_url}\n                        alt=\"\"\n                        className=\"h-10 w-10 object-cover rounded\"\n                        loading=\"lazy\"\n                      />\n                    ) : (\n                      <div className=\"h-10 w-10 bg-muted rounded flex items-center justify-center\">\n                        <Music className=\"h-4 w-4 text-muted-foreground\" />\n                      </div>\n                    )}\n                  </TableCell>\n                  <TableCell className=\"font-medium\">{track.title}</TableCell>\n                  <TableCell>{track.artist}</TableCell>\n                  <TableCell className=\"flex gap-2\">\n                    <Button\n                      variant=\"ghost\"\n                      size=\"icon\"\n                      onClick={() => setViewTrack(track)}\n                      title=\"View Details\"\n                    >\n                      <Eye className=\"h-4 w-4\" />\n                    </Button>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"icon\"\n                      onClick={() => handleEdit(track)}\n                      title=\"Edit\"\n                    >\n                      <Pencil className=\"h-4 w-4\" />\n                    </Button>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"icon\"\n                      className=\"text-destructive\"\n                      onClick={() => handleDelete(track.id)}\n                      title=\"Delete\"\n                    >\n                      <Trash className=\"h-4 w-4\" />\n                    </Button>\n                  </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        )}\n      </div>\n\n      <PaginationControl\n        currentPage={currentPage}\n        totalPages={totalPages}\n        onPageChange={setCurrentPage}\n      />\n\n      <TrackDetailsDialog\n        track={viewTrack}\n        open={!!viewTrack}\n        onOpenChange={(open) => !open && setViewTrack(null)}\n      />\n    </div>\n  )\n}\n","import { useState, useEffect } from 'react'\nimport { useForm } from 'react-hook-form'\nimport { zodResolver } from '@hookform/resolvers/zod'\nimport * as z from 'zod'\nimport {\n  getPlaylists,\n  createPlaylist,\n  updatePlaylist,\n  deletePlaylist,\n  getPlaylistTracks,\n  addTrackToPlaylist,\n  removeTrackFromPlaylist,\n  getMusicTracks,\n} from '@/services/music'\nimport { uploadFile } from '@/services/storage'\nimport { Playlist, PlaylistTrack, MusicTrack } from '@/types'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Textarea } from '@/components/ui/textarea'\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table'\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n  DialogFooter,\n} from '@/components/ui/dialog'\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from '@/components/ui/form'\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select'\nimport { useToast } from '@/hooks/use-toast'\nimport {\n  Plus,\n  Pencil,\n  Trash,\n  ListMusic,\n  Loader2,\n  Image as ImageIcon,\n  X,\n} from 'lucide-react'\nimport { ExportButton } from '@/components/admin/ExportButton'\n\nconst playlistSchema = z.object({\n  name: z.string().min(1, 'Name is required'),\n  description: z.string().optional(),\n  image_url: z.string().optional(),\n})\n\ntype PlaylistFormValues = z.infer<typeof playlistSchema>\n\nexport function PlaylistsTab() {\n  const [playlists, setPlaylists] = useState<Playlist[]>([])\n  const [isOpen, setIsOpen] = useState(false)\n  const [editingId, setEditingId] = useState<string | null>(null)\n  const [uploading, setUploading] = useState(false)\n  const [loading, setLoading] = useState(true)\n  const [imagePreview, setImagePreview] = useState<string | null>(null)\n\n  // Track Management\n  const [managingId, setManagingId] = useState<string | null>(null)\n  const [playlistTracks, setPlaylistTracks] = useState<PlaylistTrack[]>([])\n  const [availableTracks, setAvailableTracks] = useState<MusicTrack[]>([])\n  const [selectedTrackToAdd, setSelectedTrackToAdd] = useState<string>('')\n\n  const { toast } = useToast()\n\n  const form = useForm<PlaylistFormValues>({\n    resolver: zodResolver(playlistSchema),\n    defaultValues: {\n      name: '',\n      description: '',\n      image_url: '',\n    },\n  })\n\n  const loadPlaylists = async () => {\n    try {\n      setLoading(true)\n      const data = await getPlaylists()\n      setPlaylists(data)\n    } catch (error) {\n      toast({\n        title: 'Error',\n        description: 'Failed to load playlists',\n        variant: 'destructive',\n      })\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const loadTracksForPlaylist = async (playlistId: string) => {\n    try {\n      const pTracks = await getPlaylistTracks(playlistId)\n      setPlaylistTracks(pTracks)\n\n      const allTracks = await getMusicTracks()\n      setAvailableTracks(allTracks as MusicTrack[])\n    } catch (error) {\n      console.error(error)\n      toast({\n        title: 'Error',\n        description: 'Failed to load playlist tracks',\n        variant: 'destructive',\n      })\n    }\n  }\n\n  useEffect(() => {\n    loadPlaylists()\n  }, [])\n\n  const handleEdit = (playlist: Playlist) => {\n    setEditingId(playlist.id)\n    form.reset({\n      name: playlist.name,\n      description: playlist.description || '',\n      image_url: playlist.image_url || '',\n    })\n    setImagePreview(playlist.image_url || null)\n    setIsOpen(true)\n  }\n\n  const handleAddNew = () => {\n    setEditingId(null)\n    form.reset({\n      name: '',\n      description: '',\n      image_url: '',\n    })\n    setImagePreview(null)\n    setIsOpen(true)\n  }\n\n  const handleImageUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0]\n    if (!file) return\n\n    // Show preview immediately\n    const reader = new FileReader()\n    reader.onloadend = () => {\n      setImagePreview(reader.result as string)\n    }\n    reader.readAsDataURL(file)\n\n    try {\n      setUploading(true)\n      // Upload to 'playlist-covers' bucket\n      const url = await uploadFile(file, 'playlist-covers', 'covers')\n      form.setValue('image_url', url)\n      toast({ title: 'Success', description: 'Cover image uploaded' })\n    } catch (error) {\n      toast({\n        title: 'Upload Error',\n        description: 'Failed to upload image',\n        variant: 'destructive',\n      })\n    } finally {\n      setUploading(false)\n    }\n  }\n\n  const onSubmit = async (values: PlaylistFormValues) => {\n    try {\n      if (editingId) {\n        await updatePlaylist(editingId, values)\n        toast({ title: 'Success', description: 'Playlist updated' })\n      } else {\n        await createPlaylist(values)\n        toast({ title: 'Success', description: 'Playlist created' })\n      }\n      setIsOpen(false)\n      loadPlaylists()\n    } catch (error) {\n      toast({\n        title: 'Error',\n        description: 'Operation failed',\n        variant: 'destructive',\n      })\n    }\n  }\n\n  const handleDelete = async (id: string) => {\n    if (\n      !confirm(\n        'Are you sure? This will delete the playlist but keep the tracks.',\n      )\n    )\n      return\n    try {\n      await deletePlaylist(id)\n      loadPlaylists()\n      toast({ title: 'Success', description: 'Playlist deleted' })\n    } catch (error) {\n      toast({\n        title: 'Error',\n        description: 'Failed to delete',\n        variant: 'destructive',\n      })\n    }\n  }\n\n  const handleManageTracks = (playlist: Playlist) => {\n    setManagingId(playlist.id)\n    loadTracksForPlaylist(playlist.id)\n  }\n\n  const onAddTrack = async () => {\n    if (!managingId || !selectedTrackToAdd) return\n    try {\n      // Get current max order index\n      const maxOrder = playlistTracks.reduce(\n        (max, t) => Math.max(max, t.order_index),\n        -1,\n      )\n      await addTrackToPlaylist(managingId, selectedTrackToAdd, maxOrder + 1)\n      await loadTracksForPlaylist(managingId)\n      setSelectedTrackToAdd('')\n      toast({ title: 'Success', description: 'Track added to playlist' })\n    } catch (error) {\n      toast({\n        title: 'Error',\n        description: 'Failed to add track',\n        variant: 'destructive',\n      })\n    }\n  }\n\n  const onRemoveTrack = async (trackId: string) => {\n    if (!managingId) return\n    try {\n      await removeTrackFromPlaylist(managingId, trackId)\n      await loadTracksForPlaylist(managingId)\n      toast({ title: 'Success', description: 'Track removed from playlist' })\n    } catch (error) {\n      toast({\n        title: 'Error',\n        description: 'Failed to remove track',\n        variant: 'destructive',\n      })\n    }\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <div className=\"space-y-1\">\n          <h2 className=\"text-2xl font-bold tracking-tight\">Playlists</h2>\n          <p className=\"text-muted-foreground\">\n            Curate collections of music tracks with custom covers.\n          </p>\n        </div>\n        <div className=\"flex gap-2\">\n          <ExportButton data={playlists} filename=\"playlists_export\" />\n          <Dialog open={isOpen} onOpenChange={setIsOpen}>\n            <DialogTrigger asChild>\n              <Button onClick={handleAddNew}>\n                <Plus className=\"mr-2 h-4 w-4\" /> Create Playlist\n              </Button>\n            </DialogTrigger>\n            <DialogContent>\n              <DialogHeader>\n                <DialogTitle>\n                  {editingId ? 'Edit Playlist' : 'Create Playlist'}\n                </DialogTitle>\n              </DialogHeader>\n              <Form {...form}>\n                <form\n                  onSubmit={form.handleSubmit(onSubmit)}\n                  className=\"space-y-4\"\n                >\n                  <FormField\n                    control={form.control}\n                    name=\"name\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Name</FormLabel>\n                        <FormControl>\n                          <Input {...field} placeholder=\"My Awesome Playlist\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  <FormField\n                    control={form.control}\n                    name=\"description\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Description</FormLabel>\n                        <FormControl>\n                          <Textarea\n                            {...field}\n                            placeholder=\"A short description...\"\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <div className=\"space-y-2\">\n                    <FormLabel>Cover Image</FormLabel>\n                    <div className=\"flex flex-col gap-4\">\n                      <Input\n                        type=\"file\"\n                        accept=\"image/*\"\n                        onChange={handleImageUpload}\n                        disabled={uploading}\n                      />\n                      {imagePreview && (\n                        <div className=\"relative aspect-square w-32 border rounded-md overflow-hidden bg-muted\">\n                          <img\n                            src={imagePreview}\n                            alt=\"Preview\"\n                            className=\"h-full w-full object-cover\"\n                          />\n                        </div>\n                      )}\n                    </div>\n                  </div>\n\n                  <Button type=\"submit\" className=\"w-full\" disabled={uploading}>\n                    {uploading ? 'Uploading...' : 'Save Playlist'}\n                  </Button>\n                </form>\n              </Form>\n            </DialogContent>\n          </Dialog>\n        </div>\n      </div>\n\n      <div className=\"border rounded-md\">\n        {loading ? (\n          <div className=\"flex flex-col items-center justify-center p-8 space-y-2\">\n            <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\n            <p className=\"text-sm text-muted-foreground\">\n              Loading playlists...\n            </p>\n          </div>\n        ) : playlists.length === 0 ? (\n          <div className=\"flex flex-col items-center justify-center p-8 space-y-2 text-center\">\n            <div className=\"rounded-full bg-muted p-3\">\n              <ListMusic className=\"h-6 w-6 text-muted-foreground\" />\n            </div>\n            <h3 className=\"font-semibold text-lg\">No playlists found</h3>\n            <p className=\"text-sm text-muted-foreground max-w-sm\">\n              Create your first playlist to get started.\n            </p>\n          </div>\n        ) : (\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead>Cover</TableHead>\n                <TableHead>Name</TableHead>\n                <TableHead>Description</TableHead>\n                <TableHead>Actions</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {playlists.map((playlist) => (\n                <TableRow key={playlist.id}>\n                  <TableCell>\n                    {playlist.image_url ? (\n                      <img\n                        src={playlist.image_url}\n                        alt=\"\"\n                        className=\"h-10 w-10 object-cover rounded\"\n                      />\n                    ) : (\n                      <div className=\"h-10 w-10 bg-muted rounded flex items-center justify-center\">\n                        <ImageIcon className=\"h-4 w-4 text-muted-foreground\" />\n                      </div>\n                    )}\n                  </TableCell>\n                  <TableCell className=\"font-medium\">{playlist.name}</TableCell>\n                  <TableCell className=\"max-w-xs truncate\">\n                    {playlist.description}\n                  </TableCell>\n                  <TableCell className=\"flex gap-2\">\n                    <Button\n                      variant=\"ghost\"\n                      size=\"icon\"\n                      onClick={() => handleManageTracks(playlist)}\n                      title=\"Manage Tracks\"\n                    >\n                      <ListMusic className=\"h-4 w-4\" />\n                    </Button>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"icon\"\n                      onClick={() => handleEdit(playlist)}\n                      title=\"Edit\"\n                    >\n                      <Pencil className=\"h-4 w-4\" />\n                    </Button>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"icon\"\n                      className=\"text-destructive\"\n                      onClick={() => handleDelete(playlist.id)}\n                      title=\"Delete\"\n                    >\n                      <Trash className=\"h-4 w-4\" />\n                    </Button>\n                  </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        )}\n      </div>\n\n      {/* Manage Tracks Dialog */}\n      <Dialog\n        open={!!managingId}\n        onOpenChange={(open) => !open && setManagingId(null)}\n      >\n        <DialogContent className=\"max-w-3xl max-h-[80vh] flex flex-col\">\n          <DialogHeader>\n            <DialogTitle>Manage Playlist Tracks</DialogTitle>\n          </DialogHeader>\n\n          <div className=\"flex-1 flex flex-col gap-4 overflow-hidden\">\n            <div className=\"flex gap-2\">\n              <Select\n                value={selectedTrackToAdd}\n                onValueChange={setSelectedTrackToAdd}\n              >\n                <SelectTrigger className=\"w-full\">\n                  <SelectValue placeholder=\"Select a track to add...\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {availableTracks\n                    .filter(\n                      (t) => !playlistTracks.some((pt) => pt.track_id === t.id),\n                    )\n                    .map((track) => (\n                      <SelectItem key={track.id} value={track.id}>\n                        {track.title} - {track.artist}\n                      </SelectItem>\n                    ))}\n                </SelectContent>\n              </Select>\n              <Button onClick={onAddTrack} disabled={!selectedTrackToAdd}>\n                Add\n              </Button>\n            </div>\n\n            <div className=\"border rounded-md flex-1 overflow-auto\">\n              <Table>\n                <TableHeader>\n                  <TableRow>\n                    <TableHead className=\"w-12\">#</TableHead>\n                    <TableHead>Title</TableHead>\n                    <TableHead>Artist</TableHead>\n                    <TableHead className=\"w-12\"></TableHead>\n                  </TableRow>\n                </TableHeader>\n                <TableBody>\n                  {playlistTracks.length === 0 ? (\n                    <TableRow>\n                      <TableCell\n                        colSpan={4}\n                        className=\"text-center text-muted-foreground h-32\"\n                      >\n                        No tracks in this playlist yet.\n                      </TableCell>\n                    </TableRow>\n                  ) : (\n                    playlistTracks.map((pt, index) => (\n                      <TableRow key={pt.id}>\n                        <TableCell>{index + 1}</TableCell>\n                        <TableCell className=\"font-medium\">\n                          {pt.track?.title || 'Unknown'}\n                        </TableCell>\n                        <TableCell>{pt.track?.artist || 'Unknown'}</TableCell>\n                        <TableCell>\n                          <Button\n                            variant=\"ghost\"\n                            size=\"icon\"\n                            className=\"h-8 w-8 text-destructive\"\n                            onClick={() => onRemoveTrack(pt.track_id)}\n                          >\n                            <X className=\"h-4 w-4\" />\n                          </Button>\n                        </TableCell>\n                      </TableRow>\n                    ))\n                  )}\n                </TableBody>\n              </Table>\n            </div>\n          </div>\n          <DialogFooter>\n            <Button onClick={() => setManagingId(null)}>Close</Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </div>\n  )\n}\n","import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs'\nimport { TracksTab } from '@/components/admin/music/TracksTab'\nimport { PlaylistsTab } from '@/components/admin/music/PlaylistsTab'\n\nexport default function MusicManager() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <div className=\"space-y-1\">\n          <h1 className=\"text-3xl font-bold\">Music Manager</h1>\n          <p className=\"text-muted-foreground\">\n            Manage your tracks, playlists and audio files.\n          </p>\n        </div>\n      </div>\n\n      <Tabs defaultValue=\"tracks\" className=\"w-full\">\n        <TabsList className=\"grid w-full max-w-md grid-cols-2\">\n          <TabsTrigger value=\"tracks\">Tracks</TabsTrigger>\n          <TabsTrigger value=\"playlists\">Playlists</TabsTrigger>\n        </TabsList>\n        <TabsContent value=\"tracks\" className=\"mt-6\">\n          <TracksTab />\n        </TabsContent>\n        <TabsContent value=\"playlists\" className=\"mt-6\">\n          <PlaylistsTab />\n        </TabsContent>\n      </Tabs>\n    </div>\n  )\n}\n"],"x_google_ignoreList":[0],"mappings":"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"}