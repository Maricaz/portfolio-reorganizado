{"version":3,"file":"MusicManager-D8RFrnJs.js","names":[],"sources":["../../src/pages/admin/MusicManager.tsx"],"sourcesContent":["import { useEffect, useState } from 'react'\nimport {\n  getMusicTracks,\n  createTrack,\n  updateTrack,\n  deleteTrack,\n} from '@/services/music'\nimport { MusicTrack } from '@/types'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table'\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from '@/components/ui/dialog'\nimport { useToast } from '@/hooks/use-toast'\nimport { Plus, Pencil, Trash } from 'lucide-react'\nimport { Label } from '@/components/ui/label'\n\nexport default function MusicManager() {\n  const [tracks, setTracks] = useState<MusicTrack[]>([])\n  const [isOpen, setIsOpen] = useState(false)\n  const [editingTrack, setEditingTrack] = useState<Partial<MusicTrack> | null>(\n    null,\n  )\n  const { toast } = useToast()\n\n  const loadTracks = async () => {\n    try {\n      const data = await getMusicTracks()\n      setTracks(data || [])\n    } catch (error) {\n      toast({\n        title: 'Error',\n        description: 'Failed to load tracks',\n        variant: 'destructive',\n      })\n    }\n  }\n\n  useEffect(() => {\n    loadTracks()\n  }, [])\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    try {\n      if (editingTrack?.id) {\n        await updateTrack(editingTrack.id, editingTrack)\n      } else {\n        await createTrack(editingTrack as MusicTrack)\n      }\n      setIsOpen(false)\n      loadTracks()\n      toast({ title: 'Success', description: 'Track saved' })\n    } catch (error) {\n      toast({\n        title: 'Error',\n        description: 'Operation failed',\n        variant: 'destructive',\n      })\n    }\n  }\n\n  const handleDelete = async (id: string) => {\n    if (!confirm('Are you sure?')) return\n    try {\n      await deleteTrack(id)\n      loadTracks()\n      toast({ title: 'Success', description: 'Track deleted' })\n    } catch (error) {\n      toast({\n        title: 'Error',\n        description: 'Failed to delete',\n        variant: 'destructive',\n      })\n    }\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <h1 className=\"text-3xl font-bold\">Music Manager</h1>\n        <Dialog open={isOpen} onOpenChange={setIsOpen}>\n          <DialogTrigger asChild>\n            <Button onClick={() => setEditingTrack({})}>\n              <Plus className=\"mr-2 h-4 w-4\" /> Add Track\n            </Button>\n          </DialogTrigger>\n          <DialogContent>\n            <DialogHeader>\n              <DialogTitle>\n                {editingTrack?.id ? 'Edit Track' : 'Add Track'}\n              </DialogTitle>\n            </DialogHeader>\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\n              <div className=\"space-y-2\">\n                <Label>Title</Label>\n                <Input\n                  value={editingTrack?.title || ''}\n                  onChange={(e) =>\n                    setEditingTrack({ ...editingTrack, title: e.target.value })\n                  }\n                  required\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label>Artist</Label>\n                <Input\n                  value={editingTrack?.artist || ''}\n                  onChange={(e) =>\n                    setEditingTrack({ ...editingTrack, artist: e.target.value })\n                  }\n                  required\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label>Source URL (MP3)</Label>\n                <Input\n                  value={editingTrack?.src_url || ''}\n                  onChange={(e) =>\n                    setEditingTrack({\n                      ...editingTrack,\n                      src_url: e.target.value,\n                    })\n                  }\n                />\n              </div>\n              <Button type=\"submit\" className=\"w-full\">\n                Save\n              </Button>\n            </form>\n          </DialogContent>\n        </Dialog>\n      </div>\n\n      <div className=\"border rounded-md\">\n        <Table>\n          <TableHeader>\n            <TableRow>\n              <TableHead>Title</TableHead>\n              <TableHead>Artist</TableHead>\n              <TableHead>Actions</TableHead>\n            </TableRow>\n          </TableHeader>\n          <TableBody>\n            {tracks.map((track) => (\n              <TableRow key={track.id}>\n                <TableCell>{track.title}</TableCell>\n                <TableCell>{track.artist}</TableCell>\n                <TableCell className=\"flex gap-2\">\n                  <Button\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    onClick={() => {\n                      setEditingTrack(track)\n                      setIsOpen(true)\n                    }}\n                  >\n                    <Pencil className=\"h-4 w-4\" />\n                  </Button>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"text-destructive\"\n                    onClick={() => handleDelete(track.id)}\n                  >\n                    <Trash className=\"h-4 w-4\" />\n                  </Button>\n                </TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      </div>\n    </div>\n  )\n}\n"],"mappings":"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"}