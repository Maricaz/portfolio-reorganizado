{"version":3,"file":"AdminRegister-CySLfukq.js","names":["error: any"],"sources":["../../src/pages/admin/AdminRegister.tsx"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport { useForm } from 'react-hook-form'\nimport { zodResolver } from '@hookform/resolvers/zod'\nimport * as z from 'zod'\nimport { Link, useNavigate } from 'react-router-dom'\nimport { useAuth } from '@/hooks/use-auth'\nimport { useToast } from '@/hooks/use-toast'\nimport { Button } from '@/components/ui/button'\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from '@/components/ui/form'\nimport { Input } from '@/components/ui/input'\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardFooter,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card'\nimport { Loader2, UserPlus } from 'lucide-react'\n\nconst formSchema = z\n  .object({\n    email: z.string().email({ message: 'Email inválido' }),\n    password: z\n      .string()\n      .min(6, { message: 'A senha deve ter pelo menos 6 caracteres' }),\n    confirmPassword: z.string(),\n  })\n  .refine((data) => data.password === data.confirmPassword, {\n    message: 'As senhas não coincidem',\n    path: ['confirmPassword'],\n  })\n\nexport default function AdminRegister() {\n  const { signUp, user, isAdmin } = useAuth()\n  const [isLoading, setIsLoading] = useState(false)\n  const navigate = useNavigate()\n  const { toast } = useToast()\n\n  // Redirect if already logged in as Admin\n  useEffect(() => {\n    if (user && isAdmin) {\n      navigate('/admin')\n    }\n  }, [user, isAdmin, navigate])\n\n  const form = useForm<z.infer<typeof formSchema>>({\n    resolver: zodResolver(formSchema),\n    defaultValues: {\n      email: '',\n      password: '',\n      confirmPassword: '',\n    },\n  })\n\n  async function onSubmit(values: z.infer<typeof formSchema>) {\n    setIsLoading(true)\n    try {\n      const { error } = await signUp(values.email, values.password)\n      if (error) {\n        throw error\n      }\n      toast({\n        title: 'Conta criada com sucesso!',\n        description: 'Verifique seu email para confirmar o cadastro.',\n      })\n      navigate('/admin/login')\n    } catch (error: any) {\n      console.error('Registration error:', error)\n      toast({\n        variant: 'destructive',\n        title: 'Erro ao criar conta',\n        description: error.message || 'Ocorreu um erro inesperado.',\n      })\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-muted/20 p-4 animate-fade-in\">\n      <Card className=\"w-full max-w-md shadow-lg border-primary/10\">\n        <CardHeader className=\"space-y-1\">\n          <div className=\"mx-auto mb-2\">\n            <div className=\"p-3 bg-primary/10 rounded-full\">\n              <UserPlus className=\"w-6 h-6 text-primary\" />\n            </div>\n          </div>\n          <CardTitle className=\"text-center text-2xl font-bold\">\n            Criar Conta\n          </CardTitle>\n          <CardDescription className=\"text-center\">\n            Preencha os dados abaixo para se registrar\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <Form {...form}>\n            <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n              <FormField\n                control={form.control}\n                name=\"email\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Email</FormLabel>\n                    <FormControl>\n                      <Input placeholder=\"seu@email.com\" {...field} />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <FormField\n                control={form.control}\n                name=\"password\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Senha</FormLabel>\n                    <FormControl>\n                      <Input type=\"password\" placeholder=\"••••••\" {...field} />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <FormField\n                control={form.control}\n                name=\"confirmPassword\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Confirmar Senha</FormLabel>\n                    <FormControl>\n                      <Input type=\"password\" placeholder=\"••••••\" {...field} />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <Button type=\"submit\" className=\"w-full\" disabled={isLoading}>\n                {isLoading ? (\n                  <>\n                    <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                    Criando conta...\n                  </>\n                ) : (\n                  'Registrar'\n                )}\n              </Button>\n            </form>\n          </Form>\n        </CardContent>\n        <CardFooter className=\"flex justify-center\">\n          <p className=\"text-sm text-muted-foreground\">\n            Já tem uma conta?{' '}\n            <Link\n              to=\"/admin/login\"\n              className=\"text-primary hover:underline underline-offset-4\"\n            >\n              Fazer login\n            </Link>\n          </p>\n        </CardFooter>\n      </Card>\n    </div>\n  )\n}\n"],"mappings":"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"}