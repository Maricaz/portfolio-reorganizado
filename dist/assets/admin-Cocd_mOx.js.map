{"version":3,"file":"admin-Cocd_mOx.js","names":[],"sources":["../../../../cache/modules/portfolio-reorganizado-7831f/node_modules/.pnpm/lucide-react@0.562.0_react@19.2.3/node_modules/lucide-react/dist/esm/icons/shield-alert.js","../../src/services/admin.ts"],"sourcesContent":["/**\n * @license lucide-react v0.562.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z\",\n      key: \"oel41y\"\n    }\n  ],\n  [\"path\", { d: \"M12 8v4\", key: \"1got3b\" }],\n  [\"path\", { d: \"M12 16h.01\", key: \"1drbdi\" }]\n];\nconst ShieldAlert = createLucideIcon(\"shield-alert\", __iconNode);\n\nexport { __iconNode, ShieldAlert as default };\n//# sourceMappingURL=shield-alert.js.map\n","import { supabase } from '@/lib/supabase/client'\nimport { Notification, UserProfile } from '@/types'\n\nexport const getNotifications = async () => {\n  const { data, error } = await supabase\n    .from('notifications')\n    .select('*')\n    .order('created_at', { ascending: false })\n    .limit(50)\n    .returns<Notification[]>()\n\n  if (error) {\n    console.error('Error fetching notifications:', error)\n    return []\n  }\n  return data\n}\n\nexport const markNotificationAsRead = async (id: string) => {\n  const { error } = await supabase\n    .from('notifications')\n    .update({ read: true })\n    .eq('id', id)\n\n  if (error) throw error\n  return true\n}\n\nexport const markAllNotificationsAsRead = async () => {\n  const { error } = await supabase\n    .from('notifications')\n    .update({ read: true })\n    .eq('read', false)\n\n  if (error) throw error\n  return true\n}\n\nexport const getAllProfiles = async () => {\n  const { data, error } = await supabase\n    .from('profiles')\n    .select('*')\n    .order('created_at', { ascending: false })\n    .returns<UserProfile[]>()\n\n  if (error) throw error\n  return data\n}\n\nexport const updateUserRole = async (userId: string, role: string) => {\n  const { error } = await supabase\n    .from('profiles')\n    .update({ role })\n    .eq('id', userId)\n\n  if (error) throw error\n  return true\n}\n\nexport const toggleUserBan = async (userId: string, isBanned: boolean) => {\n  const { error } = await supabase\n    .from('profiles')\n    .update({ is_banned: isBanned })\n    .eq('id', userId)\n\n  if (error) throw error\n  return true\n}\n\nexport const triggerPasswordReset = async (email: string) => {\n  const { error } = await supabase.auth.resetPasswordForEmail(email, {\n    redirectTo: `${window.location.origin}/admin/reset-password`,\n  })\n  if (error) throw error\n  return true\n}\n\nexport const deleteUserProfile = async (userId: string) => {\n  // First, we need to delete the user from auth (via Edge Function ideally, but here just profile)\n  // Note: Standard supabase client can't delete auth users unless using service role.\n  // We assume there's a cascade or we just delete profile here as requested by context.\n  // Actually, context shows 'deleteUserProfile' doing profile deletion.\n  // To strictly follow rules, I stick to existing implementation logic + fixes.\n  const { error } = await supabase.from('profiles').delete().eq('id', userId)\n\n  if (error) throw error\n  return true\n}\n\nexport const createUser = async (\n  data: any,\n): Promise<{ data: any; error: any }> => {\n  const { data: result, error } = await supabase.functions.invoke(\n    'create-user',\n    {\n      body: data,\n    },\n  )\n  return { data: result, error }\n}\n"],"x_google_ignoreList":[0],"mappings":";AAoBA,IAAM,cAAc,iBAAiB,gBAXlB;CACjB,CACE,QACA;EACE,GAAG;EACH,KAAK;EACN,CACF;CACD,CAAC,QAAQ;EAAE,GAAG;EAAW,KAAK;EAAU,CAAC;CACzC,CAAC,QAAQ;EAAE,GAAG;EAAc,KAAK;EAAU,CAAC;CAC7C,CAC+D;ACjBhE,MAAa,mBAAmB,YAAY;CAC1C,MAAM,EAAE,MAAM,UAAU,MAAM,SAC3B,KAAK,gBAAgB,CACrB,OAAO,IAAI,CACX,MAAM,cAAc,EAAE,WAAW,OAAO,CAAC,CACzC,MAAM,GAAG,CACT,SAAyB;AAE5B,KAAI,OAAO;AACT,UAAQ,MAAM,iCAAiC,MAAM;AACrD,SAAO,EAAE;;AAEX,QAAO;;AAGT,MAAa,yBAAyB,OAAO,OAAe;CAC1D,MAAM,EAAE,UAAU,MAAM,SACrB,KAAK,gBAAgB,CACrB,OAAO,EAAE,MAAM,MAAM,CAAC,CACtB,GAAG,MAAM,GAAG;AAEf,KAAI,MAAO,OAAM;AACjB,QAAO;;AAGT,MAAa,6BAA6B,YAAY;CACpD,MAAM,EAAE,UAAU,MAAM,SACrB,KAAK,gBAAgB,CACrB,OAAO,EAAE,MAAM,MAAM,CAAC,CACtB,GAAG,QAAQ,MAAM;AAEpB,KAAI,MAAO,OAAM;AACjB,QAAO;;AAGT,MAAa,iBAAiB,YAAY;CACxC,MAAM,EAAE,MAAM,UAAU,MAAM,SAC3B,KAAK,WAAW,CAChB,OAAO,IAAI,CACX,MAAM,cAAc,EAAE,WAAW,OAAO,CAAC,CACzC,SAAwB;AAE3B,KAAI,MAAO,OAAM;AACjB,QAAO;;AAGT,MAAa,iBAAiB,OAAO,QAAgB,SAAiB;CACpE,MAAM,EAAE,UAAU,MAAM,SACrB,KAAK,WAAW,CAChB,OAAO,EAAE,MAAM,CAAC,CAChB,GAAG,MAAM,OAAO;AAEnB,KAAI,MAAO,OAAM;AACjB,QAAO;;AAGT,MAAa,gBAAgB,OAAO,QAAgB,aAAsB;CACxE,MAAM,EAAE,UAAU,MAAM,SACrB,KAAK,WAAW,CAChB,OAAO,EAAE,WAAW,UAAU,CAAC,CAC/B,GAAG,MAAM,OAAO;AAEnB,KAAI,MAAO,OAAM;AACjB,QAAO;;AAGT,MAAa,uBAAuB,OAAO,UAAkB;CAC3D,MAAM,EAAE,UAAU,MAAM,SAAS,KAAK,sBAAsB,OAAO,EACjE,YAAY,GAAG,OAAO,SAAS,OAAO,wBACvC,CAAC;AACF,KAAI,MAAO,OAAM;AACjB,QAAO;;AAGT,MAAa,oBAAoB,OAAO,WAAmB;CAMzD,MAAM,EAAE,UAAU,MAAM,SAAS,KAAK,WAAW,CAAC,QAAQ,CAAC,GAAG,MAAM,OAAO;AAE3E,KAAI,MAAO,OAAM;AACjB,QAAO;;AAGT,MAAa,aAAa,OACxB,SACuC;CACvC,MAAM,EAAE,MAAM,QAAQ,UAAU,MAAM,SAAS,UAAU,OACvD,eACA,EACE,MAAM,MACP,CACF;AACD,QAAO;EAAE,MAAM;EAAQ;EAAO"}