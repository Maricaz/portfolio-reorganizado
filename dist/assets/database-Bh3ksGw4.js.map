{"version":3,"file":"database-Bh3ksGw4.js","names":[],"sources":["../../src/services/database.ts"],"sourcesContent":["import { supabase } from '@/lib/supabase/client'\nimport { ContactFormData, Language, Book, Project } from '@/types'\n\nexport async function submitContactForm(data: ContactFormData) {\n  return await (supabase as any).from('contact_submissions').insert(data)\n}\n\nexport async function getLatestItem(language: Language = 'pt') {\n  // Fetch latest project\n  const { data: project } = await (supabase as any)\n    .from('projects')\n    .select('*')\n    .order('created_at', { ascending: false })\n    .limit(1)\n    .single()\n\n  // Fetch latest book for the specific language\n  const { data: book } = await supabase\n    .from('books')\n    .select('*')\n    .eq('language_code', language)\n    .order('created_at', { ascending: false })\n    .limit(1)\n    .maybeSingle()\n\n  if (!project && !book) return null\n\n  // If we have both, compare dates to see which is newer\n  if (\n    !book ||\n    (project && new Date(project.created_at) > new Date(book.created_at))\n  ) {\n    return { type: 'project', item: project as Project }\n  }\n\n  return { type: 'book', item: book as Book }\n}\n"],"mappings":";AAGA,eAAsB,kBAAkB,MAAuB;AAC7D,QAAO,MAAO,SAAiB,KAAK,sBAAsB,CAAC,OAAO,KAAK;;AAGzE,eAAsB,cAAc,WAAqB,MAAM;CAE7D,MAAM,EAAE,MAAM,YAAY,MAAO,SAC9B,KAAK,WAAW,CAChB,OAAO,IAAI,CACX,MAAM,cAAc,EAAE,WAAW,OAAO,CAAC,CACzC,MAAM,EAAE,CACR,QAAQ;CAGX,MAAM,EAAE,MAAM,SAAS,MAAM,SAC1B,KAAK,QAAQ,CACb,OAAO,IAAI,CACX,GAAG,iBAAiB,SAAS,CAC7B,MAAM,cAAc,EAAE,WAAW,OAAO,CAAC,CACzC,MAAM,EAAE,CACR,aAAa;AAEhB,KAAI,CAAC,WAAW,CAAC,KAAM,QAAO;AAG9B,KACE,CAAC,QACA,WAAW,IAAI,KAAK,QAAQ,WAAW,GAAG,IAAI,KAAK,KAAK,WAAW,CAEpE,QAAO;EAAE,MAAM;EAAW,MAAM;EAAoB;AAGtD,QAAO;EAAE,MAAM;EAAQ,MAAM;EAAc"}