{"version":3,"file":"BooksPage-1M5nILwn.js","names":[],"sources":["../../../../cache/modules/portfolio-reorganizado-7831f/node_modules/.pnpm/lucide-react@0.562.0_react@19.2.3/node_modules/lucide-react/dist/esm/icons/chevron-down.js","../../src/services/books.ts","../../src/pages/BooksPage.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.562.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [[\"path\", { d: \"m6 9 6 6 6-6\", key: \"qrunsl\" }]];\nconst ChevronDown = createLucideIcon(\"chevron-down\", __iconNode);\n\nexport { __iconNode, ChevronDown as default };\n//# sourceMappingURL=chevron-down.js.map\n","import { supabase } from '@/lib/supabase/client'\nimport { Book } from '@/types'\n\nexport const getBooks = async () => {\n  return await supabase\n    .from('books')\n    .select('*')\n    .order('created_at', { ascending: false })\n    .returns<Book[]>()\n}\n","import { useEffect, useState, useMemo } from 'react'\nimport { useLanguage } from '@/contexts/LanguageContext'\nimport { getBooks } from '@/services/books'\nimport { Book } from '@/types'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Skeleton } from '@/components/ui/skeleton'\nimport { BookOpen, ChevronDown } from 'lucide-react'\nimport { useSEO } from '@/hooks/use-seo'\nimport { slugify, cn } from '@/lib/utils'\nimport { useAnalytics } from '@/hooks/use-analytics'\n\nexport default function BooksPage() {\n  const { t } = useLanguage()\n  const { trackEvent } = useAnalytics()\n  const [books, setBooks] = useState<Book[]>([])\n  const [loading, setLoading] = useState(true)\n\n  useSEO({\n    title: 'Curadoria de Livros â€” Mariana Azevedo',\n    description: 'Leituras que moldam a sensibilidade.',\n  })\n\n  // Dynamic book cover mapping\n  const bookImages = useMemo(() => {\n    return import.meta.glob('../media/books/*.{png,jpg,jpeg,webp}', {\n      eager: true,\n      as: 'url',\n    })\n  }, [])\n\n  useEffect(() => {\n    const fetchBooks = async () => {\n      try {\n        const { data } = await getBooks()\n        if (data) setBooks(data)\n      } catch (err) {\n        console.error('Failed to fetch books', err)\n      } finally {\n        setLoading(false)\n      }\n    }\n    fetchBooks()\n  }, [])\n\n  const getCoverImage = (title: string) => {\n    const slug = slugify(title)\n    const match = Object.entries(bookImages).find(([path]) =>\n      path.toLowerCase().includes(slug),\n    )\n    return match ? match[1] : null\n  }\n\n  const trackBookSynopsisToggle = (bookTitle: string, isOpen: boolean) => {\n    trackEvent('book_synopsis_toggle', {\n      book: bookTitle,\n      state: isOpen ? 'open' : 'closed',\n    })\n  }\n\n  return (\n    <div className=\"container mx-auto px-4 py-8 max-w-6xl space-y-8\">\n      <div className=\"space-y-4 animate-fade-in-down\">\n        <h1 className=\"text-4xl font-bold tracking-tight\">{t.books.title}</h1>\n        <p className=\"text-lg text-muted-foreground max-w-2xl\">\n          {t.books.description}\n        </p>\n      </div>\n\n      {loading ? (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\n          {[1, 2, 3, 4].map((i) => (\n            <div key={i} className=\"space-y-4\">\n              <Skeleton className=\"aspect-[3/4] w-full rounded-xl\" />\n              <Skeleton className=\"h-4 w-3/4\" />\n              <Skeleton className=\"h-4 w-1/2\" />\n            </div>\n          ))}\n        </div>\n      ) : books.length > 0 ? (\n        <div className=\"grid grid-auto-fit grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\n          {books.map((book, index) => {\n            const coverUrl = getCoverImage(book.title)\n            return (\n              <Card\n                key={book.id}\n                className=\"overflow-hidden glass-soft border-primary/10 hover:border-primary/30 transition-all duration-300 h-full flex flex-col animate-fade-in-up group\"\n                style={{ animationDelay: `${index * 50}ms` }}\n              >\n                <div className=\"aspect-[3/4] relative overflow-hidden bg-muted/30\">\n                  {coverUrl ? (\n                    <img\n                      src={coverUrl}\n                      alt={book.title}\n                      loading=\"lazy\"\n                      className=\"object-cover w-full h-full transition-transform duration-700 group-hover:scale-105\"\n                    />\n                  ) : (\n                    <div className=\"w-full h-full flex flex-col items-center justify-center bg-muted/50 text-muted-foreground p-4 text-center space-y-2\">\n                      <BookOpen className=\"h-12 w-12 opacity-20\" />\n                      <span className=\"text-xs opacity-50\">\n                        {t.books.seeSynopsis}\n                      </span>\n                    </div>\n                  )}\n                </div>\n\n                <CardHeader className=\"pb-2 space-y-1\">\n                  <CardTitle\n                    className=\"text-lg leading-tight line-clamp-2\"\n                    title={book.title}\n                  >\n                    {book.title}\n                  </CardTitle>\n                  <p className=\"text-sm text-muted-foreground line-clamp-1\">\n                    {book.author}\n                  </p>\n                </CardHeader>\n\n                <CardContent className=\"flex-1 pt-2\">\n                  <details\n                    className=\"group/details\"\n                    onToggle={(e) => {\n                      const target = e.target as HTMLDetailsElement\n                      trackBookSynopsisToggle(book.title, target.open)\n                    }}\n                  >\n                    <summary className=\"cursor-pointer list-none flex items-center gap-2 text-sm font-medium text-primary hover:text-primary/80 transition-colors\">\n                      <span>{t.books.seeSynopsis}</span>\n                      <ChevronDown className=\"h-4 w-4 transition-transform duration-300 group-open/details:rotate-180\" />\n                    </summary>\n                    <div className=\"mt-3 text-sm text-muted-foreground leading-relaxed animate-accordion-down overflow-hidden\">\n                      {book.synopsis ||\n                        book.review_pt ||\n                        'No synopsis available.'}\n                    </div>\n                  </details>\n                </CardContent>\n              </Card>\n            )\n          })}\n        </div>\n      ) : (\n        <div className=\"text-center py-20 bg-muted/20 rounded-xl border border-dashed border-primary/20\">\n          <BookOpen className=\"h-12 w-12 mx-auto mb-4 text-muted-foreground opacity-50\" />\n          <p className=\"text-muted-foreground\">{t.projects.no_projects}</p>\n        </div>\n      )}\n    </div>\n  )\n}\n"],"x_google_ignoreList":[0],"mappings":"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"}