{"version":3,"file":"database-CzueZ4jy.js","names":[],"sources":["../../src/services/database.ts"],"sourcesContent":["import { supabase } from '@/lib/supabase/client'\nimport {\n  Project,\n  Book,\n  MusicTrack,\n  ResumeItem,\n  ContactSubmission,\n} from '@/types'\n\n// Projects\nexport const getProjects = async () => {\n  return await supabase\n    .from('projects')\n    .select('*')\n    .order('created_at', { ascending: false })\n    .returns<Project[]>()\n}\n\n// Latest Item (for Home)\nexport const getLatestItem = async () => {\n  // Try to get latest project\n  const { data: project } = await supabase\n    .from('projects')\n    .select('*')\n    .order('created_at', { ascending: false })\n    .limit(1)\n    .single()\n\n  // Try to get latest book\n  const { data: book } = await supabase\n    .from('books')\n    .select('*')\n    .order('created_at', { ascending: false })\n    .limit(1)\n    .single()\n\n  // Compare dates and return the latest\n  if (project && book) {\n    const projectDate = new Date(project.created_at)\n    const bookDate = new Date(book.created_at)\n    return projectDate > bookDate\n      ? { type: 'project', item: project as Project }\n      : { type: 'book', item: book as Book }\n  } else if (project) {\n    return { type: 'project', item: project as Project }\n  } else if (book) {\n    return { type: 'book', item: book as Book }\n  }\n  return null\n}\n\n// Books\nexport const getBooks = async () => {\n  return await supabase\n    .from('books')\n    .select('*')\n    .order('rating', { ascending: false }) // Show highest rated first\n    .returns<Book[]>()\n}\n\n// Music\nexport const getMusicTracks = async () => {\n  return await supabase\n    .from('music_tracks')\n    .select('*')\n    .order('created_at', { ascending: false })\n    .returns<MusicTrack[]>()\n}\n\nexport const getMusicTrackById = async (id: string) => {\n  return await supabase\n    .from('music_tracks')\n    .select('*')\n    .eq('id', id)\n    .single<MusicTrack>()\n}\n\n// Resume\nexport const getResumeData = async () => {\n  return await supabase\n    .from('resume_items')\n    .select('*')\n    .order('created_at', { ascending: false })\n    .returns<ResumeItem[]>()\n}\n\n// Contact\nexport const submitContactForm = async (\n  data: Omit<ContactSubmission, 'id' | 'created_at'>,\n) => {\n  return await supabase\n    .from('contact_submissions')\n    .insert([data])\n    .select()\n    .single()\n}\n"],"mappings":";AAUA,MAAa,cAAc,YAAY;AACrC,QAAO,MAAM,SACV,KAAK,WAAW,CAChB,OAAO,IAAI,CACX,MAAM,cAAc,EAAE,WAAW,OAAO,CAAC,CACzC,SAAoB;;AAIzB,MAAa,gBAAgB,YAAY;CAEvC,MAAM,EAAE,MAAM,YAAY,MAAM,SAC7B,KAAK,WAAW,CAChB,OAAO,IAAI,CACX,MAAM,cAAc,EAAE,WAAW,OAAO,CAAC,CACzC,MAAM,EAAE,CACR,QAAQ;CAGX,MAAM,EAAE,MAAM,SAAS,MAAM,SAC1B,KAAK,QAAQ,CACb,OAAO,IAAI,CACX,MAAM,cAAc,EAAE,WAAW,OAAO,CAAC,CACzC,MAAM,EAAE,CACR,QAAQ;AAGX,KAAI,WAAW,KAGb,QAFoB,IAAI,KAAK,QAAQ,WAAW,GAC/B,IAAI,KAAK,KAAK,WAAW,GAEtC;EAAE,MAAM;EAAW,MAAM;EAAoB,GAC7C;EAAE,MAAM;EAAQ,MAAM;EAAc;UAC/B,QACT,QAAO;EAAE,MAAM;EAAW,MAAM;EAAoB;UAC3C,KACT,QAAO;EAAE,MAAM;EAAQ,MAAM;EAAc;AAE7C,QAAO;;AAIT,MAAa,WAAW,YAAY;AAClC,QAAO,MAAM,SACV,KAAK,QAAQ,CACb,OAAO,IAAI,CACX,MAAM,UAAU,EAAE,WAAW,OAAO,CAAC,CACrC,SAAiB;;AAItB,MAAa,iBAAiB,YAAY;AACxC,QAAO,MAAM,SACV,KAAK,eAAe,CACpB,OAAO,IAAI,CACX,MAAM,cAAc,EAAE,WAAW,OAAO,CAAC,CACzC,SAAuB;;AAY5B,MAAa,gBAAgB,YAAY;AACvC,QAAO,MAAM,SACV,KAAK,eAAe,CACpB,OAAO,IAAI,CACX,MAAM,cAAc,EAAE,WAAW,OAAO,CAAC,CACzC,SAAuB;;AAI5B,MAAa,oBAAoB,OAC/B,SACG;AACH,QAAO,MAAM,SACV,KAAK,sBAAsB,CAC3B,OAAO,CAAC,KAAK,CAAC,CACd,QAAQ,CACR,QAAQ"}