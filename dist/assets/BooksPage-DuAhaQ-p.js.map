{"version":3,"file":"BooksPage-DuAhaQ-p.js","names":[],"sources":["../../src/services/books.ts","../../src/components/ui/dialog.tsx","../../src/pages/BooksPage.tsx"],"sourcesContent":["import { supabase } from '@/lib/supabase/client'\nimport { Book } from '@/types'\n\nexport const getBooks = async () => {\n  return await supabase\n    .from('books')\n    .select('*')\n    .order('created_at', { ascending: false })\n    .returns<Book[]>()\n}\n","/* Dialog Component primitives - A component that displays a dialog (a modal that appears in the center of the screen) - from shadcn/ui (exposes Dialog, DialogTrigger, DialogContent, DialogHeader, DialogFooter, DialogTitle, DialogDescription, DialogClose, DialogOverlay, DialogPortal) */\nimport * as React from 'react'\nimport * as DialogPrimitive from '@radix-ui/react-dialog'\nimport { X } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      'fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0',\n      className,\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        'fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg overflow-y-auto max-h-screen',\n        className,\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      'flex flex-col space-y-1.5 text-center sm:text-left',\n      className,\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = 'DialogHeader'\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      'flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2',\n      className,\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = 'DialogFooter'\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      'text-lg font-semibold leading-none tracking-tight',\n      className,\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn('text-sm text-muted-foreground', className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","import { useEffect, useState, useMemo } from 'react'\nimport { useLanguage } from '@/contexts/LanguageContext'\nimport { getBooks } from '@/services/books'\nimport { Book } from '@/types'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Skeleton } from '@/components/ui/skeleton'\nimport { Button } from '@/components/ui/button'\nimport { BookOpen } from 'lucide-react'\nimport { useSEO } from '@/hooks/use-seo'\nimport { slugify } from '@/lib/utils'\nimport { useAnalytics } from '@/hooks/use-analytics'\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from '@/components/ui/dialog'\nimport { ScrollArea } from '@/components/ui/scroll-area'\n\nexport default function BooksPage() {\n  const { t, language } = useLanguage()\n  const { trackBookSynopsisToggle } = useAnalytics()\n  const [books, setBooks] = useState<Book[]>([])\n  const [loading, setLoading] = useState(true)\n\n  useSEO({\n    title: `${t.books.title} â€” Mariana Azevedo`,\n    description: t.books.description,\n  })\n\n  // Dynamic book cover mapping\n  const bookImages = useMemo(() => {\n    return import.meta.glob('../media/books/*.{png,jpg,jpeg,webp}', {\n      eager: true,\n      as: 'url',\n    })\n  }, [])\n\n  useEffect(() => {\n    const fetchBooks = async () => {\n      try {\n        const { data } = await getBooks()\n        if (data) setBooks(data)\n      } catch (err) {\n        console.error('Failed to fetch books', err)\n      } finally {\n        setLoading(false)\n      }\n    }\n    fetchBooks()\n  }, [])\n\n  const getCoverImage = (title: string) => {\n    const slug = slugify(title)\n    const match = Object.entries(bookImages).find(([path]) =>\n      path.toLowerCase().includes(slug),\n    )\n    return match ? match[1] : null\n  }\n\n  const getTitle = (book: Book) => {\n    if (language === 'ko' && book.title_ko) return book.title_ko\n    return book.title\n  }\n\n  const getSynopsis = (book: Book) => {\n    if (language === 'pt') return book.synopsis_pt || book.review_pt\n    if (language === 'en') return book.synopsis_en || book.review_en\n    if (language === 'ko') return book.synopsis_ko || book.review_ko\n    return book.synopsis_en || book.review_en\n  }\n\n  return (\n    <div className=\"container mx-auto px-4 py-8 max-w-6xl space-y-8\">\n      <div className=\"space-y-4 animate-fade-in-down\">\n        <h1 className=\"text-4xl font-bold tracking-tight\">{t.books.title}</h1>\n        <p className=\"text-lg text-muted-foreground max-w-2xl\">\n          {t.books.description}\n        </p>\n      </div>\n\n      {loading ? (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\n          {[1, 2, 3, 4].map((i) => (\n            <div key={i} className=\"space-y-4\">\n              <Skeleton className=\"aspect-[3/4] w-full rounded-xl\" />\n              <Skeleton className=\"h-4 w-3/4\" />\n              <Skeleton className=\"h-4 w-1/2\" />\n            </div>\n          ))}\n        </div>\n      ) : books.length > 0 ? (\n        <div className=\"grid grid-auto-fit grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\n          {books.map((book, index) => {\n            const coverUrl = getCoverImage(book.title)\n            return (\n              <Card\n                key={book.id}\n                className=\"overflow-hidden glass-soft border-primary/10 hover:border-primary/30 transition-all duration-300 h-full flex flex-col animate-fade-in-up group\"\n                style={{ animationDelay: `${index * 50}ms` }}\n              >\n                <div className=\"aspect-[3/4] relative overflow-hidden bg-muted/30\">\n                  {coverUrl ? (\n                    <img\n                      src={coverUrl}\n                      alt={getTitle(book)}\n                      loading=\"lazy\"\n                      className=\"object-cover w-full h-full transition-transform duration-700 group-hover:scale-105\"\n                    />\n                  ) : (\n                    <div className=\"w-full h-full flex flex-col items-center justify-center bg-muted/50 text-muted-foreground p-4 text-center space-y-2\">\n                      <BookOpen className=\"h-12 w-12 opacity-20\" />\n                      <span className=\"text-xs opacity-50\">\n                        {t.books.seeSynopsis}\n                      </span>\n                    </div>\n                  )}\n                </div>\n\n                <CardHeader className=\"pb-2 space-y-1\">\n                  <CardTitle\n                    className=\"text-lg leading-tight line-clamp-2\"\n                    title={getTitle(book)}\n                  >\n                    {getTitle(book)}\n                  </CardTitle>\n                  <p className=\"text-sm text-muted-foreground line-clamp-1\">\n                    {book.author}\n                  </p>\n                </CardHeader>\n\n                <CardContent className=\"flex-1 pt-2\">\n                  <Dialog\n                    onOpenChange={(open) =>\n                      trackBookSynopsisToggle(\n                        getTitle(book),\n                        open ? 'open' : 'closed',\n                      )\n                    }\n                  >\n                    <DialogTrigger asChild>\n                      <Button\n                        variant=\"ghost\"\n                        className=\"w-full justify-start p-0 h-auto font-normal hover:bg-transparent hover:text-primary group/btn\"\n                      >\n                        <span className=\"flex items-center gap-2 text-sm font-medium text-primary group-hover/btn:text-primary/80 transition-colors\">\n                          <span>{t.books.seeSynopsis}</span>\n                          <BookOpen className=\"h-4 w-4\" />\n                        </span>\n                      </Button>\n                    </DialogTrigger>\n                    <DialogContent className=\"sm:max-w-[500px]\">\n                      <DialogHeader>\n                        <DialogTitle className=\"text-2xl font-bold leading-tight\">\n                          {getTitle(book)}\n                        </DialogTitle>\n                        <DialogDescription className=\"text-base font-medium text-primary\">\n                          {book.author}\n                        </DialogDescription>\n                      </DialogHeader>\n                      <ScrollArea className=\"max-h-[60vh] mt-4 pr-4\">\n                        <div className=\"text-muted-foreground leading-relaxed text-base whitespace-pre-line\">\n                          {getSynopsis(book) || 'No synopsis available.'}\n                        </div>\n                      </ScrollArea>\n                    </DialogContent>\n                  </Dialog>\n                </CardContent>\n              </Card>\n            )\n          })}\n        </div>\n      ) : (\n        <div className=\"text-center py-20 bg-muted/20 rounded-xl border border-dashed border-primary/20\">\n          <BookOpen className=\"h-12 w-12 mx-auto mb-4 text-muted-foreground opacity-50\" />\n          <p className=\"text-muted-foreground\">{t.projects.no_projects}</p>\n        </div>\n      )}\n    </div>\n  )\n}\n"],"mappings":";;;;;;AAGA,MAAA,WAAA,YAAA;AACE,QAAA,MAAA,SAAA,KAAA,QAAA,CAAA,OAAA,IAAA,CAAA,MAAA,cAAA,EAAA,WAAA,OAAA,CAAA,CAAA,SAAA;;;ACGF,IAAM,SAAS;AAEf,IAAM,gBAAgB;AAEtB,IAAM,eAAe;AAIrB,IAAM,gBAAA,aAAsB,YAGzB,EAAE,WAAW,GAAG,SAAS,QAC1B,iBAAA,GAAA,mBAAA,KAAC,SAAgB;CACV;CACL,WAAW,GACT,0JACA,UACD;CACD,GAAI;EACJ,CACF;AACF,cAAc,cAAA,QAAsC;AAEpD,IAAM,gBAAA,aAAsB,YAGzB,EAAE,WAAW,UAAU,GAAG,SAAS,QACpC,iBAAA,GAAA,mBAAA,MAAC,cAAA,EAAA,UAAA,CACC,iBAAA,GAAA,mBAAA,KAAC,eAAA,EAAA,CAAgB,EACjB,iBAAA,GAAA,mBAAA,MAAC,SAAgB;CACV;CACL,WAAW,GACT,4hBACA,UACD;CACD,GAAI;YAEH,UACD,iBAAA,GAAA,mBAAA,MAAC,OAAgB;EAAM,WAAU;aAC/B,iBAAA,GAAA,mBAAA,KAAC,GAAA,EAAE,WAAU,WAAA,CAAY,EACzB,iBAAA,GAAA,mBAAA,KAAC,QAAA;GAAK,WAAU;aAAU;IAAY,CAAA;GAChB,CAAA;EACA,CAAA,EAAA,CACb,CACf;AACF,cAAc,cAAA,QAAsC;AAEpD,IAAM,gBAAgB,EACpB,WACA,GAAG,YAEH,iBAAA,GAAA,mBAAA,KAAC,OAAA;CACC,WAAW,GACT,sDACA,UACD;CACD,GAAI;EACJ;AAEJ,aAAa,cAAc;AAE3B,IAAM,gBAAgB,EACpB,WACA,GAAG,YAEH,iBAAA,GAAA,mBAAA,KAAC,OAAA;CACC,WAAW,GACT,iEACA,UACD;CACD,GAAI;EACJ;AAEJ,aAAa,cAAc;AAE3B,IAAM,cAAA,aAAoB,YAGvB,EAAE,WAAW,GAAG,SAAS,QAC1B,iBAAA,GAAA,mBAAA,KAAC,OAAgB;CACV;CACL,WAAW,GACT,qDACA,UACD;CACD,GAAI;EACJ,CACF;AACF,YAAY,cAAA,MAAoC;AAEhD,IAAM,oBAAA,aAA0B,YAG7B,EAAE,WAAW,GAAG,SAAS,QAC1B,iBAAA,GAAA,mBAAA,KAAC,aAAgB;CACV;CACL,WAAW,GAAG,iCAAiC,UAAU;CACzD,GAAI;EACJ,CACF;AACF,kBAAkB,cAAA,YAA0C;ACtF5D,SAAwB,YAAY;CAClC,MAAM,EAAE,GAAG,aAAa,aAAa;CACrC,MAAM,EAAE,4BAA4B,cAAc;CAClD,MAAM,CAAC,OAAO,aAAA,GAAA,aAAA,UAA6B,EAAE,CAAC;CAC9C,MAAM,CAAC,SAAS,eAAA,GAAA,aAAA,UAAuB,KAAK;AAE5C,QAAO;EACL,OAAO,GAAG,EAAE,MAAM,MAAM;EACxB,aAAa,EAAE,MAAM;EACtB,CAAC;CAGF,MAAM,cAAA,GAAA,aAAA,eAA2B;AAC/B,SAAO,EAGL;IACD,EAAE,CAAC;AAEN,EAAA,GAAA,aAAA,iBAAgB;EACd,MAAM,aAAa,YAAY;AAC7B,OAAI;IACF,MAAM,EAAE,SAAS,MAAM,UAAU;AACjC,QAAI,KAAM,UAAS,KAAK;YACjB,KAAK;AACZ,YAAQ,MAAM,yBAAyB,IAAI;aACnC;AACR,eAAW,MAAM;;;AAGrB,cAAY;IACX,EAAE,CAAC;CAEN,MAAM,iBAAiB,UAAkB;EACvC,MAAM,OAAO,QAAQ,MAAM;EAC3B,MAAM,QAAQ,OAAO,QAAQ,WAAW,CAAC,MAAM,CAAC,UAC9C,KAAK,aAAa,CAAC,SAAS,KAAK,CAClC;AACD,SAAO,QAAQ,MAAM,KAAK;;CAG5B,MAAM,YAAY,SAAe;AAC/B,MAAI,aAAa,QAAQ,KAAK,SAAU,QAAO,KAAK;AACpD,SAAO,KAAK;;CAGd,MAAM,eAAe,SAAe;AAClC,MAAI,aAAa,KAAM,QAAO,KAAK,eAAe,KAAK;AACvD,MAAI,aAAa,KAAM,QAAO,KAAK,eAAe,KAAK;AACvD,MAAI,aAAa,KAAM,QAAO,KAAK,eAAe,KAAK;AACvD,SAAO,KAAK,eAAe,KAAK;;AAGlC,QACE,iBAAA,GAAA,mBAAA,MAAC,OAAA;EAAI,WAAU;aACb,iBAAA,GAAA,mBAAA,MAAC,OAAA;GAAI,WAAU;cACb,iBAAA,GAAA,mBAAA,KAAC,MAAA;IAAG,WAAU;cAAqC,EAAE,MAAM;KAAW,EACtE,iBAAA,GAAA,mBAAA,KAAC,KAAA;IAAE,WAAU;cACV,EAAE,MAAM;KACP,CAAA;IACA,EAEL,UACC,iBAAA,GAAA,mBAAA,KAAC,OAAA;GAAI,WAAU;aACZ;IAAC;IAAG;IAAG;IAAG;IAAE,CAAC,KAAK,MACjB,iBAAA,GAAA,mBAAA,MAAC,OAAA;IAAY,WAAU;;KACrB,iBAAA,GAAA,mBAAA,KAAC,UAAA,EAAS,WAAU,kCAAA,CAAmC;KACvD,iBAAA,GAAA,mBAAA,KAAC,UAAA,EAAS,WAAU,aAAA,CAAc;KAClC,iBAAA,GAAA,mBAAA,KAAC,UAAA,EAAS,WAAU,aAAA,CAAc;;MAH1B,EAIJ,CACN;IACE,GACJ,MAAM,SAAS,IACjB,iBAAA,GAAA,mBAAA,KAAC,OAAA;GAAI,WAAU;aACZ,MAAM,KAAK,MAAM,UAAU;IAC1B,MAAM,WAAW,cAAc,KAAK,MAAM;AAC1C,WACE,iBAAA,GAAA,mBAAA,MAAC,MAAA;KAEC,WAAU;KACV,OAAO,EAAE,gBAAgB,GAAG,QAAQ,GAAG,KAAK;;MAE5C,iBAAA,GAAA,mBAAA,KAAC,OAAA;OAAI,WAAU;iBACZ,WACC,iBAAA,GAAA,mBAAA,KAAC,OAAA;QACC,KAAK;QACL,KAAK,SAAS,KAAK;QACnB,SAAQ;QACR,WAAU;SACV,GAEF,iBAAA,GAAA,mBAAA,MAAC,OAAA;QAAI,WAAU;mBACb,iBAAA,GAAA,mBAAA,KAAC,UAAA,EAAS,WAAU,wBAAA,CAAyB,EAC7C,iBAAA,GAAA,mBAAA,KAAC,QAAA;SAAK,WAAU;mBACb,EAAE,MAAM;UACJ,CAAA;SACH;QAEJ;MAEN,iBAAA,GAAA,mBAAA,MAAC,YAAA;OAAW,WAAU;kBACpB,iBAAA,GAAA,mBAAA,KAAC,WAAA;QACC,WAAU;QACV,OAAO,SAAS,KAAK;kBAEpB,SAAS,KAAK;SACL,EACZ,iBAAA,GAAA,mBAAA,KAAC,KAAA;QAAE,WAAU;kBACV,KAAK;SACJ,CAAA;QACO;MAEb,iBAAA,GAAA,mBAAA,KAAC,aAAA;OAAY,WAAU;iBACrB,iBAAA,GAAA,mBAAA,MAAC,QAAA;QACC,eAAe,SACb,wBACE,SAAS,KAAK,EACd,OAAO,SAAS,SACjB;mBAGH,iBAAA,GAAA,mBAAA,KAAC,eAAA;SAAc,SAAA;mBACb,iBAAA,GAAA,mBAAA,KAAC,QAAA;UACC,SAAQ;UACR,WAAU;oBAEV,iBAAA,GAAA,mBAAA,MAAC,QAAA;WAAK,WAAU;sBACd,iBAAA,GAAA,mBAAA,KAAC,QAAA,EAAA,UAAM,EAAE,MAAM,aAAA,CAAmB,EAClC,iBAAA,GAAA,mBAAA,KAAC,UAAA,EAAS,WAAU,WAAA,CAAY,CAAA;YAC3B;WACA;UACK,EAChB,iBAAA,GAAA,mBAAA,MAAC,eAAA;SAAc,WAAU;oBACvB,iBAAA,GAAA,mBAAA,MAAC,cAAA,EAAA,UAAA,CACC,iBAAA,GAAA,mBAAA,KAAC,aAAA;UAAY,WAAU;oBACpB,SAAS,KAAK;WACH,EACd,iBAAA,GAAA,mBAAA,KAAC,mBAAA;UAAkB,WAAU;oBAC1B,KAAK;WACY,CAAA,EAAA,CACP,EACf,iBAAA,GAAA,mBAAA,KAAC,YAAA;UAAW,WAAU;oBACpB,iBAAA,GAAA,mBAAA,KAAC,OAAA;WAAI,WAAU;qBACZ,YAAY,KAAK,IAAI;YAClB;WACK,CAAA;UACC,CAAA;SACT;QACG;;OAtET,KAAK,GAuEL;KAET;IACE,GAEN,iBAAA,GAAA,mBAAA,MAAC,OAAA;GAAI,WAAU;cACb,iBAAA,GAAA,mBAAA,KAAC,UAAA,EAAS,WAAU,2DAAA,CAA4D,EAChF,iBAAA,GAAA,mBAAA,KAAC,KAAA;IAAE,WAAU;cAAyB,EAAE,SAAS;KAAgB,CAAA;IAC7D,CAAA;GAEJ"}