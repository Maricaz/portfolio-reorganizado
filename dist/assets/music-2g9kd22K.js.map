{"version":3,"file":"music-2g9kd22K.js","names":[],"sources":["../../src/services/music.ts"],"sourcesContent":["import { supabase } from '@/lib/supabase/client'\nimport { Database } from '@/lib/supabase/types'\nimport { Playlist, PlaylistTrack } from '@/types'\n\ntype MusicTrack = Database['public']['Tables']['music_tracks']['Row']\ntype MusicTrackInsert = Database['public']['Tables']['music_tracks']['Insert']\ntype MusicTrackUpdate = Database['public']['Tables']['music_tracks']['Update']\n\n// Tracks\nexport const getMusicTracks = async () => {\n  const { data, error } = await supabase\n    .from('music_tracks')\n    .select('*')\n    .order('created_at', { ascending: false })\n\n  if (error) {\n    console.error('Error fetching music tracks:', error)\n    throw error\n  }\n\n  return (data as MusicTrack[]) || []\n}\n\nexport const createTrack = async (track: MusicTrackInsert) => {\n  const { data, error } = await supabase\n    .from('music_tracks')\n    .insert(track)\n    .select()\n    .single()\n\n  if (error) throw error\n  return data\n}\n\nexport const updateTrack = async (id: string, updates: MusicTrackUpdate) => {\n  const { data, error } = await supabase\n    .from('music_tracks')\n    .update(updates)\n    .eq('id', id)\n    .select()\n    .single()\n\n  if (error) throw error\n  return data\n}\n\nexport const deleteTrack = async (id: string) => {\n  const { error } = await supabase.from('music_tracks').delete().eq('id', id)\n\n  if (error) throw error\n  return true\n}\n\n// Album Concept\nexport const getAlbumConcept = async () => {\n  const { data, error } = await supabase\n    .from('album_settings' as any)\n    .select('*')\n    .limit(1)\n    .single()\n\n  if (error) return null\n\n  return data\n}\n\n// Playlists\nexport const getPlaylists = async () => {\n  const { data, error } = await supabase\n    .from('playlists')\n    .select('*')\n    .order('created_at', { ascending: false })\n\n  if (error) {\n    console.error('Error fetching playlists:', error)\n    throw error\n  }\n\n  return (data as Playlist[]) || []\n}\n\nexport const createPlaylist = async (playlist: Partial<Playlist>) => {\n  const { data, error } = await supabase\n    .from('playlists')\n    .insert(playlist)\n    .select()\n    .single()\n\n  if (error) throw error\n  return data\n}\n\nexport const updatePlaylist = async (\n  id: string,\n  updates: Partial<Playlist>,\n) => {\n  const { data, error } = await supabase\n    .from('playlists')\n    .update(updates)\n    .eq('id', id)\n    .select()\n    .single()\n\n  if (error) throw error\n  return data\n}\n\nexport const deletePlaylist = async (id: string) => {\n  const { error } = await supabase.from('playlists').delete().eq('id', id)\n\n  if (error) throw error\n  return true\n}\n\n// Playlist Tracks\nexport const getPlaylistTracks = async (playlistId: string) => {\n  const { data, error } = await supabase\n    .from('playlist_tracks')\n    .select('*, track:music_tracks(*)')\n    .eq('playlist_id', playlistId)\n    .order('order_index', { ascending: true })\n\n  if (error) throw error\n  return (data as unknown as PlaylistTrack[]) || []\n}\n\nexport const addTrackToPlaylist = async (\n  playlistId: string,\n  trackId: string,\n  orderIndex: number = 0,\n) => {\n  const { data, error } = await supabase\n    .from('playlist_tracks')\n    .insert({\n      playlist_id: playlistId,\n      track_id: trackId,\n      order_index: orderIndex,\n    })\n    .select()\n    .single()\n\n  if (error) throw error\n  return data\n}\n\nexport const removeTrackFromPlaylist = async (\n  playlistId: string,\n  trackId: string,\n) => {\n  const { error } = await supabase\n    .from('playlist_tracks')\n    .delete()\n    .match({ playlist_id: playlistId, track_id: trackId })\n\n  if (error) throw error\n  return true\n}\n"],"mappings":";AASA,MAAa,iBAAiB,YAAY;CACxC,MAAM,EAAE,MAAM,UAAU,MAAM,SAC3B,KAAK,eAAe,CACpB,OAAO,IAAI,CACX,MAAM,cAAc,EAAE,WAAW,OAAO,CAAC;AAE5C,KAAI,OAAO;AACT,UAAQ,MAAM,gCAAgC,MAAM;AACpD,QAAM;;AAGR,QAAQ,QAAyB,EAAE;;AAGrC,MAAa,cAAc,OAAO,UAA4B;CAC5D,MAAM,EAAE,MAAM,UAAU,MAAM,SAC3B,KAAK,eAAe,CACpB,OAAO,MAAM,CACb,QAAQ,CACR,QAAQ;AAEX,KAAI,MAAO,OAAM;AACjB,QAAO;;AAGT,MAAa,cAAc,OAAO,IAAY,YAA8B;CAC1E,MAAM,EAAE,MAAM,UAAU,MAAM,SAC3B,KAAK,eAAe,CACpB,OAAO,QAAQ,CACf,GAAG,MAAM,GAAG,CACZ,QAAQ,CACR,QAAQ;AAEX,KAAI,MAAO,OAAM;AACjB,QAAO;;AAGT,MAAa,cAAc,OAAO,OAAe;CAC/C,MAAM,EAAE,UAAU,MAAM,SAAS,KAAK,eAAe,CAAC,QAAQ,CAAC,GAAG,MAAM,GAAG;AAE3E,KAAI,MAAO,OAAM;AACjB,QAAO;;AAIT,MAAa,kBAAkB,YAAY;CACzC,MAAM,EAAE,MAAM,UAAU,MAAM,SAC3B,KAAK,iBAAwB,CAC7B,OAAO,IAAI,CACX,MAAM,EAAE,CACR,QAAQ;AAEX,KAAI,MAAO,QAAO;AAElB,QAAO;;AAIT,MAAa,eAAe,YAAY;CACtC,MAAM,EAAE,MAAM,UAAU,MAAM,SAC3B,KAAK,YAAY,CACjB,OAAO,IAAI,CACX,MAAM,cAAc,EAAE,WAAW,OAAO,CAAC;AAE5C,KAAI,OAAO;AACT,UAAQ,MAAM,6BAA6B,MAAM;AACjD,QAAM;;AAGR,QAAQ,QAAuB,EAAE;;AAGnC,MAAa,iBAAiB,OAAO,aAAgC;CACnE,MAAM,EAAE,MAAM,UAAU,MAAM,SAC3B,KAAK,YAAY,CACjB,OAAO,SAAS,CAChB,QAAQ,CACR,QAAQ;AAEX,KAAI,MAAO,OAAM;AACjB,QAAO;;AAGT,MAAa,iBAAiB,OAC5B,IACA,YACG;CACH,MAAM,EAAE,MAAM,UAAU,MAAM,SAC3B,KAAK,YAAY,CACjB,OAAO,QAAQ,CACf,GAAG,MAAM,GAAG,CACZ,QAAQ,CACR,QAAQ;AAEX,KAAI,MAAO,OAAM;AACjB,QAAO;;AAGT,MAAa,iBAAiB,OAAO,OAAe;CAClD,MAAM,EAAE,UAAU,MAAM,SAAS,KAAK,YAAY,CAAC,QAAQ,CAAC,GAAG,MAAM,GAAG;AAExE,KAAI,MAAO,OAAM;AACjB,QAAO;;AAIT,MAAa,oBAAoB,OAAO,eAAuB;CAC7D,MAAM,EAAE,MAAM,UAAU,MAAM,SAC3B,KAAK,kBAAkB,CACvB,OAAO,2BAA2B,CAClC,GAAG,eAAe,WAAW,CAC7B,MAAM,eAAe,EAAE,WAAW,MAAM,CAAC;AAE5C,KAAI,MAAO,OAAM;AACjB,QAAQ,QAAuC,EAAE;;AAGnD,MAAa,qBAAqB,OAChC,YACA,SACA,aAAqB,MAClB;CACH,MAAM,EAAE,MAAM,UAAU,MAAM,SAC3B,KAAK,kBAAkB,CACvB,OAAO;EACN,aAAa;EACb,UAAU;EACV,aAAa;EACd,CAAC,CACD,QAAQ,CACR,QAAQ;AAEX,KAAI,MAAO,OAAM;AACjB,QAAO;;AAGT,MAAa,0BAA0B,OACrC,YACA,YACG;CACH,MAAM,EAAE,UAAU,MAAM,SACrB,KAAK,kBAAkB,CACvB,QAAQ,CACR,MAAM;EAAE,aAAa;EAAY,UAAU;EAAS,CAAC;AAExD,KAAI,MAAO,OAAM;AACjB,QAAO"}