{"version":3,"file":"books-DoEShVrV.js","names":[],"sources":["../../src/services/books.ts"],"sourcesContent":["import { supabase } from '@/lib/supabase/client'\nimport { Book, Language } from '@/types'\n\nexport const getBooks = async (language: Language) => {\n  const { data, error } = await supabase\n    .from('books')\n    .select('*')\n    .eq('language_code', language)\n    .order('created_at', { ascending: false })\n    .returns<Book[]>()\n\n  if (error) {\n    console.error('Error fetching books:', error)\n    return null\n  }\n\n  return data\n}\n\nexport const getAllBooks = async () => {\n  const { data, error } = await supabase\n    .from('books')\n    .select('*')\n    .order('created_at', { ascending: false })\n    .returns<Book[]>()\n\n  if (error) throw error\n  return data\n}\n\nexport const getBooksPaginated = async (\n  page: number = 1,\n  limit: number = 10,\n  search: string = '',\n) => {\n  const from = (page - 1) * limit\n  const to = from + limit - 1\n\n  let query = supabase\n    .from('books')\n    .select('*', { count: 'exact' })\n    .order('created_at', { ascending: false })\n\n  if (search) {\n    query = query.ilike('title', `%${search}%`)\n  }\n\n  const { data, error, count } = await query.range(from, to)\n\n  if (error) throw error\n\n  return {\n    data: data as Book[],\n    count: count || 0,\n    page,\n    limit,\n    totalPages: count ? Math.ceil(count / limit) : 0,\n  }\n}\n\nexport const createBook = async (book: Partial<Book>) => {\n  const { data, error } = await supabase\n    .from('books')\n    .insert(book)\n    .select()\n    .single()\n\n  if (error) throw error\n  return data\n}\n\nexport const updateBook = async (id: string, updates: Partial<Book>) => {\n  const { data, error } = await supabase\n    .from('books')\n    .update(updates)\n    .eq('id', id)\n    .select()\n    .single()\n\n  if (error) throw error\n  return data\n}\n\nexport const deleteBook = async (id: string) => {\n  const { error } = await supabase.from('books').delete().eq('id', id)\n\n  if (error) throw error\n  return true\n}\n"],"mappings":";AAGA,MAAa,WAAW,OAAO,aAAuB;CACpD,MAAM,EAAE,MAAM,UAAU,MAAM,SAC3B,KAAK,QAAQ,CACb,OAAO,IAAI,CACX,GAAG,iBAAiB,SAAS,CAC7B,MAAM,cAAc,EAAE,WAAW,OAAO,CAAC,CACzC,SAAiB;AAEpB,KAAI,OAAO;AACT,UAAQ,MAAM,yBAAyB,MAAM;AAC7C,SAAO;;AAGT,QAAO;;AAcT,MAAa,oBAAoB,OAC/B,OAAe,GACf,QAAgB,IAChB,SAAiB,OACd;CACH,MAAM,QAAQ,OAAO,KAAK;CAC1B,MAAM,KAAK,OAAO,QAAQ;CAE1B,IAAI,QAAQ,SACT,KAAK,QAAQ,CACb,OAAO,KAAK,EAAE,OAAO,SAAS,CAAC,CAC/B,MAAM,cAAc,EAAE,WAAW,OAAO,CAAC;AAE5C,KAAI,OACF,SAAQ,MAAM,MAAM,SAAS,IAAI,OAAO,GAAG;CAG7C,MAAM,EAAE,MAAM,OAAO,UAAU,MAAM,MAAM,MAAM,MAAM,GAAG;AAE1D,KAAI,MAAO,OAAM;AAEjB,QAAO;EACC;EACN,OAAO,SAAS;EAChB;EACA;EACA,YAAY,QAAQ,KAAK,KAAK,QAAQ,MAAM,GAAG;EAChD;;AAGH,MAAa,aAAa,OAAO,SAAwB;CACvD,MAAM,EAAE,MAAM,UAAU,MAAM,SAC3B,KAAK,QAAQ,CACb,OAAO,KAAK,CACZ,QAAQ,CACR,QAAQ;AAEX,KAAI,MAAO,OAAM;AACjB,QAAO;;AAGT,MAAa,aAAa,OAAO,IAAY,YAA2B;CACtE,MAAM,EAAE,MAAM,UAAU,MAAM,SAC3B,KAAK,QAAQ,CACb,OAAO,QAAQ,CACf,GAAG,MAAM,GAAG,CACZ,QAAQ,CACR,QAAQ;AAEX,KAAI,MAAO,OAAM;AACjB,QAAO;;AAGT,MAAa,aAAa,OAAO,OAAe;CAC9C,MAAM,EAAE,UAAU,MAAM,SAAS,KAAK,QAAQ,CAAC,QAAQ,CAAC,GAAG,MAAM,GAAG;AAEpE,KAAI,MAAO,OAAM;AACjB,QAAO"}