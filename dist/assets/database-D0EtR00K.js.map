{"version":3,"file":"database-D0EtR00K.js","names":[],"sources":["../../src/services/database.ts"],"sourcesContent":["import { supabase } from '@/lib/supabase/client'\nimport {\n  Project,\n  Book,\n  ResumeItem,\n  MusicTrack,\n  ContactSubmission,\n} from '@/types'\n\nexport const getProjects = async (language: string) => {\n  const { data, error } = await supabase\n    .from('projects')\n    .select('*')\n    .eq('language', language)\n    .order('created_at', { ascending: false })\n  return { data: data as Project[], error }\n}\n\nexport const getBooks = async (language: string) => {\n  const { data, error } = await supabase\n    .from('books')\n    .select('*')\n    .eq('language', language)\n    .order('created_at', { ascending: false })\n  return { data: data as Book[], error }\n}\n\nexport const getResumeItems = async (language: string) => {\n  const { data, error } = await supabase\n    .from('resume_items')\n    .select('*')\n    .eq('language', language)\n    .order('created_at', { ascending: false })\n  return { data: data as ResumeItem[], error }\n}\n\nexport const getMusicTracks = async () => {\n  // Music tracks are shared but lyrics are multilingual columns\n  const { data, error } = await supabase\n    .from('music_tracks')\n    .select('*')\n    .order('created_at', { ascending: false })\n  return { data: data as MusicTrack[], error }\n}\n\nexport const submitContact = async (\n  submission: Omit<ContactSubmission, 'id' | 'created_at'>,\n) => {\n  const { data, error } = await supabase\n    .from('contact_submissions')\n    .insert([submission])\n    .select()\n  return { data, error }\n}\n\nexport const getLatestItem = async (language: string) => {\n  const { data: projects } = await supabase\n    .from('projects')\n    .select('*')\n    .eq('language', language)\n    .limit(1)\n    .order('created_at', { ascending: false })\n\n  const { data: books } = await supabase\n    .from('books')\n    .select('*')\n    .eq('language', language)\n    .limit(1)\n    .order('created_at', { ascending: false })\n\n  const project = projects?.[0]\n  const book = books?.[0]\n\n  if (project && book) {\n    return new Date(project.created_at) > new Date(book.created_at)\n      ? { type: 'project', item: project as Project }\n      : { type: 'book', item: book as Book }\n  } else if (project) {\n    return { type: 'project', item: project as Project }\n  } else if (book) {\n    return { type: 'book', item: book as Book }\n  }\n\n  return null\n}\n"],"mappings":";AASA,MAAa,cAAc,OAAO,aAAqB;CACrD,MAAM,EAAE,MAAM,UAAU,MAAM,SAC3B,KAAK,WAAW,CAChB,OAAO,IAAI,CACX,GAAG,YAAY,SAAS,CACxB,MAAM,cAAc,EAAE,WAAW,OAAO,CAAC;AAC5C,QAAO;EAAQ;EAAmB;EAAO;;AAG3C,MAAa,WAAW,OAAO,aAAqB;CAClD,MAAM,EAAE,MAAM,UAAU,MAAM,SAC3B,KAAK,QAAQ,CACb,OAAO,IAAI,CACX,GAAG,YAAY,SAAS,CACxB,MAAM,cAAc,EAAE,WAAW,OAAO,CAAC;AAC5C,QAAO;EAAQ;EAAgB;EAAO;;AAGxC,MAAa,iBAAiB,OAAO,aAAqB;CACxD,MAAM,EAAE,MAAM,UAAU,MAAM,SAC3B,KAAK,eAAe,CACpB,OAAO,IAAI,CACX,GAAG,YAAY,SAAS,CACxB,MAAM,cAAc,EAAE,WAAW,OAAO,CAAC;AAC5C,QAAO;EAAQ;EAAsB;EAAO;;AAG9C,MAAa,iBAAiB,YAAY;CAExC,MAAM,EAAE,MAAM,UAAU,MAAM,SAC3B,KAAK,eAAe,CACpB,OAAO,IAAI,CACX,MAAM,cAAc,EAAE,WAAW,OAAO,CAAC;AAC5C,QAAO;EAAQ;EAAsB;EAAO;;AAG9C,MAAa,gBAAgB,OAC3B,eACG;CACH,MAAM,EAAE,MAAM,UAAU,MAAM,SAC3B,KAAK,sBAAsB,CAC3B,OAAO,CAAC,WAAW,CAAC,CACpB,QAAQ;AACX,QAAO;EAAE;EAAM;EAAO;;AAGxB,MAAa,gBAAgB,OAAO,aAAqB;CACvD,MAAM,EAAE,MAAM,aAAa,MAAM,SAC9B,KAAK,WAAW,CAChB,OAAO,IAAI,CACX,GAAG,YAAY,SAAS,CACxB,MAAM,EAAE,CACR,MAAM,cAAc,EAAE,WAAW,OAAO,CAAC;CAE5C,MAAM,EAAE,MAAM,UAAU,MAAM,SAC3B,KAAK,QAAQ,CACb,OAAO,IAAI,CACX,GAAG,YAAY,SAAS,CACxB,MAAM,EAAE,CACR,MAAM,cAAc,EAAE,WAAW,OAAO,CAAC;CAE5C,MAAM,UAAU,WAAW;CAC3B,MAAM,OAAO,QAAQ;AAErB,KAAI,WAAW,KACb,QAAO,IAAI,KAAK,QAAQ,WAAW,GAAG,IAAI,KAAK,KAAK,WAAW,GAC3D;EAAE,MAAM;EAAW,MAAM;EAAoB,GAC7C;EAAE,MAAM;EAAQ,MAAM;EAAc;UAC/B,QACT,QAAO;EAAE,MAAM;EAAW,MAAM;EAAoB;UAC3C,KACT,QAAO;EAAE,MAAM;EAAQ,MAAM;EAAc;AAG7C,QAAO"}