{"version":3,"file":"SettingsManager-C6-3p_4w.js","names":[],"sources":["../../../../cache/modules/portfolio-reorganizado-7831f/node_modules/.pnpm/lucide-react@0.562.0_react@19.2.3/node_modules/lucide-react/dist/esm/icons/save.js","../../src/pages/admin/SettingsManager.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.562.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z\",\n      key: \"1c8476\"\n    }\n  ],\n  [\"path\", { d: \"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7\", key: \"1ydtos\" }],\n  [\"path\", { d: \"M7 3v4a1 1 0 0 0 1 1h7\", key: \"t51u73\" }]\n];\nconst Save = createLucideIcon(\"save\", __iconNode);\n\nexport { __iconNode, Save as default };\n//# sourceMappingURL=save.js.map\n","import { useEffect, useState, useMemo } from 'react'\nimport {\n  getSiteTranslations,\n  upsertTranslation,\n  flattenTranslations,\n} from '@/services/translations'\nimport { translations } from '@/lib/translations'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table'\nimport { useToast } from '@/hooks/use-toast'\nimport { Search, Save } from 'lucide-react'\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs'\n\nexport default function SettingsManager() {\n  const [dbTranslations, setDbTranslations] = useState<any[]>([])\n  const [search, setSearch] = useState('')\n  const [editingValues, setEditingValues] = useState<Record<string, string>>({})\n  const { toast } = useToast()\n\n  // Flatten the default translations to get all possible keys\n  const flattenedDefaults = useMemo(() => {\n    return {\n      pt: flattenTranslations(translations.pt),\n      en: flattenTranslations(translations.en),\n      ko: flattenTranslations(translations.ko),\n    }\n  }, [])\n\n  const allKeys = useMemo(() => {\n    return Object.keys(flattenedDefaults.pt).sort()\n  }, [flattenedDefaults])\n\n  useEffect(() => {\n    loadTranslations()\n  }, [])\n\n  const loadTranslations = async () => {\n    const data = await getSiteTranslations()\n    setDbTranslations(data || [])\n  }\n\n  const handleSave = async (key: string, lang: string) => {\n    const value = editingValues[`${key}-${lang}`]\n    if (value === undefined) return\n\n    try {\n      const { error } = await upsertTranslation(key, lang, value)\n      if (error) throw error\n      toast({ title: 'Success', description: 'Translation updated' })\n      loadTranslations()\n    } catch (error) {\n      toast({\n        title: 'Error',\n        description: 'Failed to update',\n        variant: 'destructive',\n      })\n    }\n  }\n\n  const getDisplayValue = (key: string, lang: 'pt' | 'en' | 'ko') => {\n    // 1. Check editing state\n    if (editingValues[`${key}-${lang}`] !== undefined) {\n      return editingValues[`${key}-${lang}`]\n    }\n    // 2. Check DB\n    const dbValue = dbTranslations.find(\n      (t) => t.key === key && t.lang === lang,\n    )?.value\n    if (dbValue) return dbValue\n    // 3. Check Default\n    return flattenedDefaults[lang][key] || ''\n  }\n\n  const filteredKeys = allKeys.filter((key) =>\n    key.toLowerCase().includes(search.toLowerCase()),\n  )\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"space-y-2\">\n        <h1 className=\"text-3xl font-bold\">Content Manager</h1>\n        <p className=\"text-muted-foreground\">\n          Manage site-wide text and translations.\n        </p>\n      </div>\n\n      <div className=\"flex items-center gap-2\">\n        <Search className=\"h-4 w-4 text-muted-foreground\" />\n        <Input\n          placeholder=\"Search keys...\"\n          className=\"max-w-sm\"\n          value={search}\n          onChange={(e) => setSearch(e.target.value)}\n        />\n      </div>\n\n      <Tabs defaultValue=\"pt\">\n        <TabsList>\n          <TabsTrigger value=\"pt\">PortuguÃªs</TabsTrigger>\n          <TabsTrigger value=\"en\">English</TabsTrigger>\n          <TabsTrigger value=\"ko\">Korean</TabsTrigger>\n        </TabsList>\n        {['pt', 'en', 'ko'].map((lang) => (\n          <TabsContent key={lang} value={lang}>\n            <div className=\"border rounded-md\">\n              <Table>\n                <TableHeader>\n                  <TableRow>\n                    <TableHead className=\"w-[300px]\">Key</TableHead>\n                    <TableHead>Value</TableHead>\n                    <TableHead className=\"w-[100px]\">Action</TableHead>\n                  </TableRow>\n                </TableHeader>\n                <TableBody>\n                  {filteredKeys.map((key) => (\n                    <TableRow key={key}>\n                      <TableCell className=\"font-mono text-xs\">{key}</TableCell>\n                      <TableCell>\n                        <Input\n                          value={getDisplayValue(key, lang as any)}\n                          onChange={(e) =>\n                            setEditingValues((prev) => ({\n                              ...prev,\n                              [`${key}-${lang}`]: e.target.value,\n                            }))\n                          }\n                        />\n                      </TableCell>\n                      <TableCell>\n                        <Button\n                          size=\"icon\"\n                          variant=\"ghost\"\n                          onClick={() => handleSave(key, lang)}\n                        >\n                          <Save className=\"h-4 w-4\" />\n                        </Button>\n                      </TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n            </div>\n          </TabsContent>\n        ))}\n      </Tabs>\n    </div>\n  )\n}\n"],"x_google_ignoreList":[0],"mappings":"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"}